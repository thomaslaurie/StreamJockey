(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["spotify-player"],{

/***/ "./public/js/spotify-player.js":
/*!*************************************!*\
  !*** ./public/js/spotify-player.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* Spotify JS-SDK - v1.6.0-b5fe287 */\r\n!(function(e) {\r\n  function t(r) {\r\n    if (n[r]) return n[r].exports;\r\n    var s = (n[r] = { i: r, l: !1, exports: {} });\r\n    return e[r].call(s.exports, s, s.exports, t), (s.l = !0), s.exports;\r\n  }\r\n  var n = {};\r\n  (t.m = e),\r\n    (t.c = n),\r\n    (t.d = function(e, n, r) {\r\n      t.o(e, n) ||\r\n        Object.defineProperty(e, n, {\r\n          configurable: !1,\r\n          enumerable: !0,\r\n          get: r\r\n        });\r\n    }),\r\n    (t.n = function(e) {\r\n      var n =\r\n        e && e.__esModule\r\n          ? function() {\r\n              return e.default;\r\n            }\r\n          : function() {\r\n              return e;\r\n            };\r\n      return t.d(n, \"a\", n), n;\r\n    }),\r\n    (t.o = function(e, t) {\r\n      return Object.prototype.hasOwnProperty.call(e, t);\r\n    }),\r\n    (t.p = \"\"),\r\n    t((t.s = 2));\r\n})([\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    var r = {\r\n      SPOTIFY_MESSAGE: \"SP_MESSAGE\",\r\n      ACCOUNT_ERROR: \"ACCOUNT_ERROR\",\r\n      AUTH_ERROR: \"AUTH_ERROR\",\r\n      CONNECT: \"CONNECT\",\r\n      CONNECTED: \"CONNECTED\",\r\n      CURRENT_STATE: \"CURRENT_STATE\",\r\n      DISCONNECT: \"DISCONNECT\",\r\n      EVENT: \"EVENT\",\r\n      GET_CURRENT_STATE: \"GET_CURRENT_STATE\",\r\n      GET_TOKEN: \"GET_TOKEN\",\r\n      GET_VOLUME: \"GET_VOLUME\",\r\n      INIT: \"INIT\",\r\n      LOADED: \"LOADED\",\r\n      NEXT_TRACK: \"NEXT_TRACK\",\r\n      PAUSE: \"PAUSE\",\r\n      PLAYBACK_ERROR: \"PLAYBACK_ERROR\",\r\n      PLAYER_INIT_ERROR: \"PLAYER_INIT_ERROR\",\r\n      PLAYER_READY: \"PLAYER_READY\",\r\n      PLAYER_NOT_READY: \"PLAYER_NOT_READY\",\r\n      PLAYER_STATE_CHANGED: \"PLAYER_STATE_CHANGED\",\r\n      PREV_TRACK: \"PREV_TRACK\",\r\n      RESUME: \"RESUME\",\r\n      SEEK: \"SEEK\",\r\n      SET_NAME: \"SET_NAME\",\r\n      SET_VOLUME: \"SET_VOLUME\",\r\n      TOGGLE_PLAY: \"TOGGLE_PLAY\",\r\n      TOKEN: \"TOKEN\",\r\n      VOLUME: \"VOLUME\",\r\n      accountError: function(e) {\r\n        return this._createEventMessage(r.ACCOUNT_ERROR, { message: e });\r\n      },\r\n      authError: function(e) {\r\n        return this._createEventMessage(r.AUTH_ERROR, e);\r\n      },\r\n      playbackError: function(e) {\r\n        return this._createEventMessage(r.PLAYBACK_ERROR, e);\r\n      },\r\n      playerReady: function(e) {\r\n        return this._createEventMessage(r.PLAYER_READY, e);\r\n      },\r\n      playerNotReady: function(e) {\r\n        return this._createEventMessage(r.PLAYER_NOT_READY, e);\r\n      },\r\n      connect: function() {\r\n        return this._createMessage(r.CONNECT);\r\n      },\r\n      connected: function(e, t) {\r\n        return this._createMessage(r.CONNECTED, { connected: e, ref: t });\r\n      },\r\n      disconnect: function() {\r\n        return this._createMessage(r.DISCONNECT);\r\n      },\r\n      init: function(e) {\r\n        return this._createMessage(r.INIT, e);\r\n      },\r\n      playerInitError: function(e) {\r\n        return this._createEventMessage(r.PLAYER_INIT_ERROR, e);\r\n      },\r\n      getToken: function() {\r\n        return this._createMessage(r.GET_TOKEN);\r\n      },\r\n      token: function(e, t) {\r\n        return this._createMessage(r.TOKEN, { token: e, ref: t });\r\n      },\r\n      pause: function() {\r\n        return this._createMessage(r.PAUSE);\r\n      },\r\n      resume: function() {\r\n        return this._createMessage(r.RESUME);\r\n      },\r\n      togglePlay: function() {\r\n        return this._createMessage(r.TOGGLE_PLAY);\r\n      },\r\n      seek: function(e) {\r\n        return this._createMessage(r.SEEK, e);\r\n      },\r\n      nextTrack: function(e) {\r\n        return this._createMessage(r.NEXT_TRACK, e);\r\n      },\r\n      previousTrack: function(e) {\r\n        return this._createMessage(r.PREV_TRACK, e);\r\n      },\r\n      getCurrentState: function() {\r\n        return this._createMessage(r.GET_CURRENT_STATE);\r\n      },\r\n      currentState: function(e, t) {\r\n        return this._createMessage(r.CURRENT_STATE, { state: e, ref: t });\r\n      },\r\n      playerStateChanged: function(e) {\r\n        return this._createEventMessage(r.PLAYER_STATE_CHANGED, e);\r\n      },\r\n      getVolume: function() {\r\n        return this._createMessage(r.GET_VOLUME);\r\n      },\r\n      volume: function(e, t) {\r\n        return this._createMessage(r.VOLUME, { volume: e, ref: t });\r\n      },\r\n      setVolume: function(e) {\r\n        return this._createMessage(r.SET_VOLUME, e);\r\n      },\r\n      setName: function(e) {\r\n        return this._createMessage(r.SET_NAME, e);\r\n      },\r\n      embeddedLoaded: function() {\r\n        return this._createMessage(r.LOADED);\r\n      },\r\n      _createEventMessage: function(e, t) {\r\n        return this._createMessage(r.EVENT, { name: e, eventData: t });\r\n      },\r\n      _createMessage: function(e, t) {\r\n        return {\r\n          type: r.SPOTIFY_MESSAGE,\r\n          body: { topic: e, data: t ? JSON.parse(JSON.stringify(t)) : null }\r\n        };\r\n      }\r\n    };\r\n    e.exports = r;\r\n  },\r\n  function(e, t) {\r\n    var n;\r\n    n = (function() {\r\n      return this;\r\n    })();\r\n    try {\r\n      n = n || Function(\"return this\")() || (0, eval)(\"this\");\r\n    } catch (e) {\r\n      \"object\" == typeof window && (n = window);\r\n    }\r\n    e.exports = n;\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    function r() {\r\n      var e = n(3);\r\n      if (!document.body) throw new Error(\"Document doesn't have a body\");\r\n      if (\r\n        ((window.Spotify = { Player: e.setupPlayerEnv(window) }),\r\n        window.onSpotifyWebPlaybackSDKReady)\r\n      )\r\n        window.onSpotifyWebPlaybackSDKReady();\r\n      else {\r\n        if (!window.onSpotifyPlayerAPIReady)\r\n          throw new Error(\"onSpotifyWebPlaybackSDKReady is not defined\");\r\n        window.onSpotifyPlayerAPIReady();\r\n      }\r\n    }\r\n    \"complete\" === document.readyState\r\n      ? r()\r\n      : window.addEventListener(\"load\", r);\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    var r = n(4),\r\n      s = n(5),\r\n      o = n(0),\r\n      i = n(6),\r\n      a = function(e, t) {\r\n        var n,\r\n          a = \"https://sdk.scdn.co/embedded/index.html\",\r\n          u = s.defer(),\r\n          c = new r(),\r\n          _ =\r\n            t ||\r\n            function(t) {\r\n              var n = e.document.createElement(\"iframe\");\r\n              return (\r\n                (n.src = t),\r\n                n.style.setProperty(\"display\", \"none\", \"important\"),\r\n                (n.allow = \"encrypted-media; autoplay\"),\r\n                e.document.body.appendChild(n),\r\n                n.contentWindow\r\n              );\r\n            },\r\n          h = function(t) {\r\n            t === o.LOADED && (c.stopListening(e, h), u.resolve());\r\n          };\r\n        c.listen(e, h), (n = _(a));\r\n        var f = function(t) {\r\n          (this._options = this._sanitizeOptions(t)),\r\n            (this._handleMessages = this._handleMessages.bind(this)),\r\n            (this._messageHandlers = {}),\r\n            (this._eventListeners = {}),\r\n            this._setupMessageHandlers(),\r\n            (this._connectionRequests = {}),\r\n            (this._getCurrentStateRequests = {}),\r\n            (this._getVolumeRequests = {}),\r\n            (this.isLoaded = u.promise.then(\r\n              function() {\r\n                c.listen(e, this._handleMessages),\r\n                  this._sendMessage(o.init(this._options));\r\n              }.bind(this)\r\n            ));\r\n        };\r\n        return (\r\n          (f.prototype._sanitizeOptions = function(t) {\r\n            var n = (e && e.location && e.location.hostname) || \"\";\r\n            return {\r\n              name: t.name || n,\r\n              id: i.get(),\r\n              getOAuthToken: t.getOAuthToken || t.getOauthToken,\r\n              volume: t.volume || 1\r\n            };\r\n          }),\r\n          (f.prototype._setupMessageHandlers = function() {\r\n            (this._messageHandlers[o.GET_TOKEN] = this._onGetToken.bind(this)),\r\n              (this._messageHandlers[o.EVENT] = this._onEvent.bind(this)),\r\n              (this._messageHandlers[o.CONNECTED] = this._onConnected.bind(\r\n                this\r\n              )),\r\n              (this._messageHandlers[\r\n                o.CURRENT_STATE\r\n              ] = this._onCurrentState.bind(this)),\r\n              (this._messageHandlers[o.VOLUME] = this._onVolume.bind(this));\r\n          }),\r\n          (f.prototype.connect = function() {\r\n            return this.isLoaded.then(\r\n              function() {\r\n                var e = this._sendMessage(o.connect());\r\n                return (\r\n                  (this._connectionRequests[e] = s.defer()),\r\n                  this._connectionRequests[e].promise\r\n                );\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype.on = function(e, t) {\r\n            if (!e) throw new TypeError(\"Argument `eventName` is required.\");\r\n            if (\"function\" != typeof t)\r\n              throw new TypeError(\"Argument `listener` must be a function.\");\r\n            return (\r\n              (this._eventListeners[e] = this._eventListeners[e] || []),\r\n              -1 === this._eventListeners[e].indexOf(t) &&\r\n                (this._eventListeners[e].push(t), !0)\r\n            );\r\n          }),\r\n          (f.prototype.addListener = function(e, t) {\r\n            return this.on(e, t);\r\n          }),\r\n          (f.prototype.removeListener = function(e, t) {\r\n            if (!e) throw new TypeError(\"Argument `eventName` is required.\");\r\n            if (1 === arguments.length)\r\n              return (this._eventListeners[e] = []), !0;\r\n            if (\"function\" != typeof t)\r\n              throw new TypeError(\"Argument `listener` must be a function.\");\r\n            var n = this._eventListeners[e];\r\n            return (\r\n              !(!n || !n.length) &&\r\n              ((this._eventListeners[e] = n.filter(function(e) {\r\n                return e !== t;\r\n              })),\r\n              !0)\r\n            );\r\n          }),\r\n          (f.prototype.getCurrentState = function() {\r\n            return this.isLoaded.then(\r\n              function() {\r\n                var e = this._sendMessage(o.getCurrentState());\r\n                return (\r\n                  (this._getCurrentStateRequests[e] = s.defer()),\r\n                  this._getCurrentStateRequests[e].promise\r\n                );\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype.getVolume = function() {\r\n            return this.isLoaded.then(\r\n              function() {\r\n                var e = this._sendMessage(o.getVolume());\r\n                return (\r\n                  (this._getVolumeRequests[e] = s.defer()),\r\n                  this._getVolumeRequests[e].promise\r\n                );\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype.setName = function(e) {\r\n            return this._sendMessageWhenLoaded(o.setName(e));\r\n          }),\r\n          (f.prototype.setVolume = function(e) {\r\n            return this._sendMessageWhenLoaded(o.setVolume(e));\r\n          }),\r\n          (f.prototype.pause = function() {\r\n            return this._sendMessageWhenLoaded(o.pause());\r\n          }),\r\n          (f.prototype.resume = function() {\r\n            return this._sendMessageWhenLoaded(o.resume());\r\n          }),\r\n          (f.prototype.togglePlay = function() {\r\n            return this._sendMessageWhenLoaded(o.togglePlay());\r\n          }),\r\n          (f.prototype.seek = function(e) {\r\n            return this._sendMessageWhenLoaded(o.seek(e));\r\n          }),\r\n          (f.prototype.previousTrack = function(e) {\r\n            return this._sendMessageWhenLoaded(o.previousTrack(e));\r\n          }),\r\n          (f.prototype.nextTrack = function(e) {\r\n            return this._sendMessageWhenLoaded(o.nextTrack(e));\r\n          }),\r\n          (f.prototype.disconnect = function() {\r\n            return this._sendMessageWhenLoaded(o.disconnect());\r\n          }),\r\n          (f.prototype._getListeners = (function() {\r\n            var e = {};\r\n            return (\r\n              (e[o.ACCOUNT_ERROR] = \"account_error\"),\r\n              (e[o.AUTH_ERROR] = \"authentication_error\"),\r\n              (e[o.PLAYBACK_ERROR] = \"playback_error\"),\r\n              (e[o.PLAYER_INIT_ERROR] = \"initialization_error\"),\r\n              (e[o.PLAYER_READY] = \"ready\"),\r\n              (e[o.PLAYER_NOT_READY] = \"not_ready\"),\r\n              (e[o.PLAYER_STATE_CHANGED] = \"player_state_changed\"),\r\n              function(t) {\r\n                return this._eventListeners[e[t]] || [];\r\n              }\r\n            );\r\n          })()),\r\n          (f.prototype._onEvent = function(e) {\r\n            this._getListeners(e.name).forEach(function(t) {\r\n              t(e.eventData);\r\n            });\r\n          }),\r\n          (f.prototype._onGetToken = function(e, t) {\r\n            var n = this._options.getOAuthToken;\r\n            if (\"function\" != typeof n) {\r\n              var r = \"getOAuthToken is not a function\";\r\n              if (this._getListeners(o.PLAYER_INIT_ERROR).length)\r\n                return void this._onEvent({\r\n                  name: o.PLAYER_INIT_ERROR,\r\n                  eventData: { message: r }\r\n                });\r\n              throw new Error(r);\r\n            }\r\n            new s(n).then(\r\n              function(e) {\r\n                this._sendMessage(o.token(e, t));\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype._onConnected = function(e) {\r\n            e.ref in this._connectionRequests &&\r\n              (this._connectionRequests[e.ref].resolve(e.connected),\r\n              delete this._connectionRequests[e.ref]);\r\n          }),\r\n          (f.prototype._onCurrentState = function(e) {\r\n            e.ref in this._getCurrentStateRequests &&\r\n              (this._getCurrentStateRequests[e.ref].resolve(e.state),\r\n              delete this._getCurrentStateRequests[e.ref]);\r\n          }),\r\n          (f.prototype._onVolume = function(e) {\r\n            e.ref in this._getVolumeRequests &&\r\n              (this._getVolumeRequests[e.ref].resolve(e.volume),\r\n              delete this._getVolumeRequests[e.ref]);\r\n          }),\r\n          (f.prototype._handleMessages = function(e, t, n) {\r\n            e in this._messageHandlers && this._messageHandlers[e](t, n);\r\n          }),\r\n          (f.prototype._sendMessage = function(e) {\r\n            return c.send(n, e, a);\r\n          }),\r\n          (f.prototype._sendMessageWhenLoaded = function(e) {\r\n            return this.isLoaded.then(this._sendMessage.bind(this, e));\r\n          }),\r\n          f\r\n        );\r\n      };\r\n    e.exports.setupPlayerEnv = a;\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    var r = n(0),\r\n      s = function() {\r\n        (this._onMessageCallback = function() {}),\r\n          (this._receiveMessage = this._receiveMessage.bind(this)),\r\n          (this._messageId = 0);\r\n      };\r\n    (s.prototype.listen = function(e, t) {\r\n      (this._onMessageCallback = t),\r\n        e.addEventListener(\"message\", this._receiveMessage);\r\n    }),\r\n      (s.prototype.stopListening = function(e) {\r\n        e.removeEventListener(\"message\", this._receiveMessage);\r\n      }),\r\n      (s.prototype.send = function(e, t, n) {\r\n        return e.postMessage(this._addMessageId(t), n || \"*\"), t.seq;\r\n      }),\r\n      (s.prototype._addMessageId = function(e) {\r\n        return (e.seq = this._messageId++), e;\r\n      }),\r\n      (s.prototype._receiveMessage = function(e) {\r\n        var t = e.data;\r\n        t.type === r.SPOTIFY_MESSAGE &&\r\n          t.body &&\r\n          t.body.topic &&\r\n          this._onMessageCallback(t.body.topic, t.body.data, t.seq);\r\n      }),\r\n      (e.exports = s);\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    (function(t) {\r\n      var n = t.Promise;\r\n      if (!n) throw new Error(\"Fatal: no Promise implementation available.\");\r\n      var r;\r\n      (r = Object.defineProperty\r\n        ? function(e, t, n) {\r\n            return e[t]\r\n              ? e\r\n              : (Object.defineProperty(e, t, {\r\n                  value: n,\r\n                  configurable: !0,\r\n                  writable: !0\r\n                }),\r\n                e);\r\n          }\r\n        : function(e, t, n) {\r\n            return e[t] ? e : ((e[t] = n), e);\r\n          }),\r\n        r(n, \"defer\", function() {\r\n          var e = {};\r\n          return (\r\n            (e.promise = new n(function(t, n) {\r\n              (e.resolve = t), (e.reject = n);\r\n            })),\r\n            e\r\n          );\r\n        }),\r\n        r(n.prototype, \"spread\", function(e, t) {\r\n          return this.then(function(e) {\r\n            return n.all(e);\r\n          }).then(function(t) {\r\n            return 1 === t.length ? e(t[0]) : e.apply(this, t);\r\n          }, t);\r\n        }),\r\n        (e.exports = n);\r\n    }.call(t, n(1)));\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    (function(t) {\r\n      function r() {\r\n        var e = new t.Uint8Array(16);\r\n        return (\r\n          t.crypto.getRandomValues(e), i.toHex(e.join(\"\"), 40).slice(0, 40)\r\n        );\r\n      }\r\n      function s() {\r\n        for (var e = new Array(27), t = e.length; t--; )\r\n          e[t] = Math.floor(8 * Math.random());\r\n        return i.toHex(e.join(\"\"), 40);\r\n      }\r\n      function o(e, n) {\r\n        if (e && \"string\" == typeof e) return e;\r\n        if (n) return u();\r\n        var r = t.localStorage.getItem(c);\r\n        return r || ((r = u()), t.localStorage.setItem(c, r)), r;\r\n      }\r\n      var i = n(7),\r\n        a =\r\n          \"function\" == typeof t.Uint8Array &&\r\n          void 0 !== t.crypto &&\r\n          \"function\" == typeof t.crypto.getRandomValues,\r\n        u = a ? r : s,\r\n        c = \"_spharmony_device_id\";\r\n      e.exports = {\r\n        get: o,\r\n        generate: u,\r\n        generateWithCrypto: r,\r\n        generateWithRandom: s\r\n      };\r\n    }.call(t, n(1)));\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    function r(e, t, n) {\r\n      for (var r = 0, s = 0; s < e.length; ++s) {\r\n        var o = e[s] * t + r;\r\n        (e[s] = o % n), (r = ~~(o / n));\r\n      }\r\n      for (; r; ) e.push(r % n), (r = ~~(r / n));\r\n    }\r\n    function s(e, t, n, r) {\r\n      var s,\r\n        o,\r\n        i = 0;\r\n      for (o = 0; o < t.length; ++o)\r\n        (s = ~~e[o] + t[o] * n + i), (e[o] = s % r), (i = ~~(s / r));\r\n      for (; i; ) (s = ~~e[o] + i), (e[o] = s % r), (i = ~~(s / r)), ++o;\r\n    }\r\n    function o(e, t, n) {\r\n      for (var o = [0], i = [1], a = 0; a < e.length; ++a)\r\n        s(o, i, e[a], n), r(i, t, n);\r\n      return o;\r\n    }\r\n    function i(e, t) {\r\n      for (var n = [], r = 0; r < e.length; ++r) n.push(t[e[r]]);\r\n      return n.reverse();\r\n    }\r\n    function a(e, t) {\r\n      for (; e.length < t; ) e.push(0);\r\n      return e;\r\n    }\r\n    var u = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n      c = {},\r\n      _ = {};\r\n    !(function() {\r\n      var e, t;\r\n      for (e = 0, t = u.length; e < t; ++e) _[u[e]] = e;\r\n      for (e = 0; e < 16; ++e) c[\"0123456789abcdef\"[e]] = e;\r\n      for (e = 0; e < 16; ++e) c[\"0123456789ABCDEF\"[e]] = e;\r\n    })(),\r\n      (e.exports = {\r\n        fromBytes: function(e, t) {\r\n          return i(a(o(e.slice(0).reverse(), 256, 62), t), u).join(\"\");\r\n        },\r\n        toBytes: function(e, t) {\r\n          return a(o(i(e, _), 62, 256), t).reverse();\r\n        },\r\n        toHex: function(e, t) {\r\n          return i(a(o(i(e, _), 62, 16), t), u).join(\"\");\r\n        },\r\n        fromHex: function(e, t) {\r\n          return i(a(o(i(e, c), 16, 62), t), u).join(\"\");\r\n        }\r\n      });\r\n  }\r\n]);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvanMvc3BvdGlmeS1wbGF5ZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvc3BvdGlmeS1wbGF5ZXIuanM/MzBhNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBTcG90aWZ5IEpTLVNESyAtIHYxLjYuMC1iNWZlMjg3ICovXHJcbiEoZnVuY3Rpb24oZSkge1xyXG4gIGZ1bmN0aW9uIHQocikge1xyXG4gICAgaWYgKG5bcl0pIHJldHVybiBuW3JdLmV4cG9ydHM7XHJcbiAgICB2YXIgcyA9IChuW3JdID0geyBpOiByLCBsOiAhMSwgZXhwb3J0czoge30gfSk7XHJcbiAgICByZXR1cm4gZVtyXS5jYWxsKHMuZXhwb3J0cywgcywgcy5leHBvcnRzLCB0KSwgKHMubCA9ICEwKSwgcy5leHBvcnRzO1xyXG4gIH1cclxuICB2YXIgbiA9IHt9O1xyXG4gICh0Lm0gPSBlKSxcclxuICAgICh0LmMgPSBuKSxcclxuICAgICh0LmQgPSBmdW5jdGlvbihlLCBuLCByKSB7XHJcbiAgICAgIHQubyhlLCBuKSB8fFxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCB7XHJcbiAgICAgICAgICBjb25maWd1cmFibGU6ICExLFxyXG4gICAgICAgICAgZW51bWVyYWJsZTogITAsXHJcbiAgICAgICAgICBnZXQ6IHJcclxuICAgICAgICB9KTtcclxuICAgIH0pLFxyXG4gICAgKHQubiA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIG4gPVxyXG4gICAgICAgIGUgJiYgZS5fX2VzTW9kdWxlXHJcbiAgICAgICAgICA/IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBlLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgIHJldHVybiB0LmQobiwgXCJhXCIsIG4pLCBuO1xyXG4gICAgfSksXHJcbiAgICAodC5vID0gZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHQpO1xyXG4gICAgfSksXHJcbiAgICAodC5wID0gXCJcIiksXHJcbiAgICB0KCh0LnMgPSAyKSk7XHJcbn0pKFtcclxuICBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciByID0ge1xyXG4gICAgICBTUE9USUZZX01FU1NBR0U6IFwiU1BfTUVTU0FHRVwiLFxyXG4gICAgICBBQ0NPVU5UX0VSUk9SOiBcIkFDQ09VTlRfRVJST1JcIixcclxuICAgICAgQVVUSF9FUlJPUjogXCJBVVRIX0VSUk9SXCIsXHJcbiAgICAgIENPTk5FQ1Q6IFwiQ09OTkVDVFwiLFxyXG4gICAgICBDT05ORUNURUQ6IFwiQ09OTkVDVEVEXCIsXHJcbiAgICAgIENVUlJFTlRfU1RBVEU6IFwiQ1VSUkVOVF9TVEFURVwiLFxyXG4gICAgICBESVNDT05ORUNUOiBcIkRJU0NPTk5FQ1RcIixcclxuICAgICAgRVZFTlQ6IFwiRVZFTlRcIixcclxuICAgICAgR0VUX0NVUlJFTlRfU1RBVEU6IFwiR0VUX0NVUlJFTlRfU1RBVEVcIixcclxuICAgICAgR0VUX1RPS0VOOiBcIkdFVF9UT0tFTlwiLFxyXG4gICAgICBHRVRfVk9MVU1FOiBcIkdFVF9WT0xVTUVcIixcclxuICAgICAgSU5JVDogXCJJTklUXCIsXHJcbiAgICAgIExPQURFRDogXCJMT0FERURcIixcclxuICAgICAgTkVYVF9UUkFDSzogXCJORVhUX1RSQUNLXCIsXHJcbiAgICAgIFBBVVNFOiBcIlBBVVNFXCIsXHJcbiAgICAgIFBMQVlCQUNLX0VSUk9SOiBcIlBMQVlCQUNLX0VSUk9SXCIsXHJcbiAgICAgIFBMQVlFUl9JTklUX0VSUk9SOiBcIlBMQVlFUl9JTklUX0VSUk9SXCIsXHJcbiAgICAgIFBMQVlFUl9SRUFEWTogXCJQTEFZRVJfUkVBRFlcIixcclxuICAgICAgUExBWUVSX05PVF9SRUFEWTogXCJQTEFZRVJfTk9UX1JFQURZXCIsXHJcbiAgICAgIFBMQVlFUl9TVEFURV9DSEFOR0VEOiBcIlBMQVlFUl9TVEFURV9DSEFOR0VEXCIsXHJcbiAgICAgIFBSRVZfVFJBQ0s6IFwiUFJFVl9UUkFDS1wiLFxyXG4gICAgICBSRVNVTUU6IFwiUkVTVU1FXCIsXHJcbiAgICAgIFNFRUs6IFwiU0VFS1wiLFxyXG4gICAgICBTRVRfTkFNRTogXCJTRVRfTkFNRVwiLFxyXG4gICAgICBTRVRfVk9MVU1FOiBcIlNFVF9WT0xVTUVcIixcclxuICAgICAgVE9HR0xFX1BMQVk6IFwiVE9HR0xFX1BMQVlcIixcclxuICAgICAgVE9LRU46IFwiVE9LRU5cIixcclxuICAgICAgVk9MVU1FOiBcIlZPTFVNRVwiLFxyXG4gICAgICBhY2NvdW50RXJyb3I6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuQUNDT1VOVF9FUlJPUiwgeyBtZXNzYWdlOiBlIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBhdXRoRXJyb3I6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuQVVUSF9FUlJPUiwgZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHBsYXliYWNrRXJyb3I6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuUExBWUJBQ0tfRVJST1IsIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBwbGF5ZXJSZWFkeTogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVFdmVudE1lc3NhZ2Uoci5QTEFZRVJfUkVBRFksIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBwbGF5ZXJOb3RSZWFkeTogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVFdmVudE1lc3NhZ2Uoci5QTEFZRVJfTk9UX1JFQURZLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgY29ubmVjdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5DT05ORUNUKTtcclxuICAgICAgfSxcclxuICAgICAgY29ubmVjdGVkOiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5DT05ORUNURUQsIHsgY29ubmVjdGVkOiBlLCByZWY6IHQgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRpc2Nvbm5lY3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuRElTQ09OTkVDVCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGluaXQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLklOSVQsIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBwbGF5ZXJJbml0RXJyb3I6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuUExBWUVSX0lOSVRfRVJST1IsIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRUb2tlbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5HRVRfVE9LRU4pO1xyXG4gICAgICB9LFxyXG4gICAgICB0b2tlbjogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuVE9LRU4sIHsgdG9rZW46IGUsIHJlZjogdCB9KTtcclxuICAgICAgfSxcclxuICAgICAgcGF1c2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuUEFVU0UpO1xyXG4gICAgICB9LFxyXG4gICAgICByZXN1bWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuUkVTVU1FKTtcclxuICAgICAgfSxcclxuICAgICAgdG9nZ2xlUGxheTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5UT0dHTEVfUExBWSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNlZWs6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLlNFRUssIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBuZXh0VHJhY2s6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLk5FWFRfVFJBQ0ssIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBwcmV2aW91c1RyYWNrOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5QUkVWX1RSQUNLLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0Q3VycmVudFN0YXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLkdFVF9DVVJSRU5UX1NUQVRFKTtcclxuICAgICAgfSxcclxuICAgICAgY3VycmVudFN0YXRlOiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5DVVJSRU5UX1NUQVRFLCB7IHN0YXRlOiBlLCByZWY6IHQgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHBsYXllclN0YXRlQ2hhbmdlZDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVFdmVudE1lc3NhZ2Uoci5QTEFZRVJfU1RBVEVfQ0hBTkdFRCwgZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldFZvbHVtZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5HRVRfVk9MVU1FKTtcclxuICAgICAgfSxcclxuICAgICAgdm9sdW1lOiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5WT0xVTUUsIHsgdm9sdW1lOiBlLCByZWY6IHQgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldFZvbHVtZTogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuU0VUX1ZPTFVNRSwgZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldE5hbWU6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLlNFVF9OQU1FLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgZW1iZWRkZWRMb2FkZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuTE9BREVEKTtcclxuICAgICAgfSxcclxuICAgICAgX2NyZWF0ZUV2ZW50TWVzc2FnZTogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuRVZFTlQsIHsgbmFtZTogZSwgZXZlbnREYXRhOiB0IH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBfY3JlYXRlTWVzc2FnZTogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB0eXBlOiByLlNQT1RJRllfTUVTU0FHRSxcclxuICAgICAgICAgIGJvZHk6IHsgdG9waWM6IGUsIGRhdGE6IHQgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSA6IG51bGwgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLmV4cG9ydHMgPSByO1xyXG4gIH0sXHJcbiAgZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgdmFyIG47XHJcbiAgICBuID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0pKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBuID0gbiB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDAsIGV2YWwpKFwidGhpc1wiKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgXCJvYmplY3RcIiA9PSB0eXBlb2Ygd2luZG93ICYmIChuID0gd2luZG93KTtcclxuICAgIH1cclxuICAgIGUuZXhwb3J0cyA9IG47XHJcbiAgfSxcclxuICBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIGZ1bmN0aW9uIHIoKSB7XHJcbiAgICAgIHZhciBlID0gbigzKTtcclxuICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KSB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCBkb2Vzbid0IGhhdmUgYSBib2R5XCIpO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgKCh3aW5kb3cuU3BvdGlmeSA9IHsgUGxheWVyOiBlLnNldHVwUGxheWVyRW52KHdpbmRvdykgfSksXHJcbiAgICAgICAgd2luZG93Lm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkpXHJcbiAgICAgIClcclxuICAgICAgICB3aW5kb3cub25TcG90aWZ5V2ViUGxheWJhY2tTREtSZWFkeSgpO1xyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5vblNwb3RpZnlQbGF5ZXJBUElSZWFkeSlcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkgaXMgbm90IGRlZmluZWRcIik7XHJcbiAgICAgICAgd2luZG93Lm9uU3BvdGlmeVBsYXllckFQSVJlYWR5KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFwiY29tcGxldGVcIiA9PT0gZG9jdW1lbnQucmVhZHlTdGF0ZVxyXG4gICAgICA/IHIoKVxyXG4gICAgICA6IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCByKTtcclxuICB9LFxyXG4gIGZ1bmN0aW9uKGUsIHQsIG4pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHIgPSBuKDQpLFxyXG4gICAgICBzID0gbig1KSxcclxuICAgICAgbyA9IG4oMCksXHJcbiAgICAgIGkgPSBuKDYpLFxyXG4gICAgICBhID0gZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHZhciBuLFxyXG4gICAgICAgICAgYSA9IFwiaHR0cHM6Ly9zZGsuc2Nkbi5jby9lbWJlZGRlZC9pbmRleC5odG1sXCIsXHJcbiAgICAgICAgICB1ID0gcy5kZWZlcigpLFxyXG4gICAgICAgICAgYyA9IG5ldyByKCksXHJcbiAgICAgICAgICBfID1cclxuICAgICAgICAgICAgdCB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAgICAgdmFyIG4gPSBlLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIChuLnNyYyA9IHQpLFxyXG4gICAgICAgICAgICAgICAgbi5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgXCJub25lXCIsIFwiaW1wb3J0YW50XCIpLFxyXG4gICAgICAgICAgICAgICAgKG4uYWxsb3cgPSBcImVuY3J5cHRlZC1tZWRpYTsgYXV0b3BsYXlcIiksXHJcbiAgICAgICAgICAgICAgICBlLmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobiksXHJcbiAgICAgICAgICAgICAgICBuLmNvbnRlbnRXaW5kb3dcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgaCA9IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgdCA9PT0gby5MT0FERUQgJiYgKGMuc3RvcExpc3RlbmluZyhlLCBoKSwgdS5yZXNvbHZlKCkpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICBjLmxpc3RlbihlLCBoKSwgKG4gPSBfKGEpKTtcclxuICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICh0aGlzLl9vcHRpb25zID0gdGhpcy5fc2FuaXRpemVPcHRpb25zKHQpKSxcclxuICAgICAgICAgICAgKHRoaXMuX2hhbmRsZU1lc3NhZ2VzID0gdGhpcy5faGFuZGxlTWVzc2FnZXMuYmluZCh0aGlzKSksXHJcbiAgICAgICAgICAgICh0aGlzLl9tZXNzYWdlSGFuZGxlcnMgPSB7fSksXHJcbiAgICAgICAgICAgICh0aGlzLl9ldmVudExpc3RlbmVycyA9IHt9KSxcclxuICAgICAgICAgICAgdGhpcy5fc2V0dXBNZXNzYWdlSGFuZGxlcnMoKSxcclxuICAgICAgICAgICAgKHRoaXMuX2Nvbm5lY3Rpb25SZXF1ZXN0cyA9IHt9KSxcclxuICAgICAgICAgICAgKHRoaXMuX2dldEN1cnJlbnRTdGF0ZVJlcXVlc3RzID0ge30pLFxyXG4gICAgICAgICAgICAodGhpcy5fZ2V0Vm9sdW1lUmVxdWVzdHMgPSB7fSksXHJcbiAgICAgICAgICAgICh0aGlzLmlzTG9hZGVkID0gdS5wcm9taXNlLnRoZW4oXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjLmxpc3RlbihlLCB0aGlzLl9oYW5kbGVNZXNzYWdlcyksXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG8uaW5pdCh0aGlzLl9vcHRpb25zKSk7XHJcbiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5fc2FuaXRpemVPcHRpb25zID0gZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChlICYmIGUubG9jYXRpb24gJiYgZS5sb2NhdGlvbi5ob3N0bmFtZSkgfHwgXCJcIjtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUgfHwgbixcclxuICAgICAgICAgICAgICBpZDogaS5nZXQoKSxcclxuICAgICAgICAgICAgICBnZXRPQXV0aFRva2VuOiB0LmdldE9BdXRoVG9rZW4gfHwgdC5nZXRPYXV0aFRva2VuLFxyXG4gICAgICAgICAgICAgIHZvbHVtZTogdC52b2x1bWUgfHwgMVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX3NldHVwTWVzc2FnZUhhbmRsZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICh0aGlzLl9tZXNzYWdlSGFuZGxlcnNbby5HRVRfVE9LRU5dID0gdGhpcy5fb25HZXRUb2tlbi5iaW5kKHRoaXMpKSxcclxuICAgICAgICAgICAgICAodGhpcy5fbWVzc2FnZUhhbmRsZXJzW28uRVZFTlRdID0gdGhpcy5fb25FdmVudC5iaW5kKHRoaXMpKSxcclxuICAgICAgICAgICAgICAodGhpcy5fbWVzc2FnZUhhbmRsZXJzW28uQ09OTkVDVEVEXSA9IHRoaXMuX29uQ29ubmVjdGVkLmJpbmQoXHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgKSksXHJcbiAgICAgICAgICAgICAgKHRoaXMuX21lc3NhZ2VIYW5kbGVyc1tcclxuICAgICAgICAgICAgICAgIG8uQ1VSUkVOVF9TVEFURVxyXG4gICAgICAgICAgICAgIF0gPSB0aGlzLl9vbkN1cnJlbnRTdGF0ZS5iaW5kKHRoaXMpKSxcclxuICAgICAgICAgICAgICAodGhpcy5fbWVzc2FnZUhhbmRsZXJzW28uVk9MVU1FXSA9IHRoaXMuX29uVm9sdW1lLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0xvYWRlZC50aGVuKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLl9zZW5kTWVzc2FnZShvLmNvbm5lY3QoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAodGhpcy5fY29ubmVjdGlvblJlcXVlc3RzW2VdID0gcy5kZWZlcigpKSxcclxuICAgICAgICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvblJlcXVlc3RzW2VdLnByb21pc2VcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgYGV2ZW50TmFtZWAgaXMgcmVxdWlyZWQuXCIpO1xyXG4gICAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0KVxyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCBgbGlzdGVuZXJgIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgKHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VdID0gdGhpcy5fZXZlbnRMaXN0ZW5lcnNbZV0gfHwgW10pLFxyXG4gICAgICAgICAgICAgIC0xID09PSB0aGlzLl9ldmVudExpc3RlbmVyc1tlXS5pbmRleE9mKHQpICYmXHJcbiAgICAgICAgICAgICAgICAodGhpcy5fZXZlbnRMaXN0ZW5lcnNbZV0ucHVzaCh0KSwgITApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24oZSwgdCk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgYGV2ZW50TmFtZWAgaXMgcmVxdWlyZWQuXCIpO1xyXG4gICAgICAgICAgICBpZiAoMSA9PT0gYXJndW1lbnRzLmxlbmd0aClcclxuICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VdID0gW10pLCAhMDtcclxuICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdClcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgYGxpc3RlbmVyYCBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VdO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICEoIW4gfHwgIW4ubGVuZ3RoKSAmJlxyXG4gICAgICAgICAgICAgICgodGhpcy5fZXZlbnRMaXN0ZW5lcnNbZV0gPSBuLmZpbHRlcihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZSAhPT0gdDtcclxuICAgICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgICAgITApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5nZXRDdXJyZW50U3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkZWQudGhlbihcclxuICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5fc2VuZE1lc3NhZ2Uoby5nZXRDdXJyZW50U3RhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAodGhpcy5fZ2V0Q3VycmVudFN0YXRlUmVxdWVzdHNbZV0gPSBzLmRlZmVyKCkpLFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLl9nZXRDdXJyZW50U3RhdGVSZXF1ZXN0c1tlXS5wcm9taXNlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuZ2V0Vm9sdW1lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTG9hZGVkLnRoZW4oXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuX3NlbmRNZXNzYWdlKG8uZ2V0Vm9sdW1lKCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgKHRoaXMuX2dldFZvbHVtZVJlcXVlc3RzW2VdID0gcy5kZWZlcigpKSxcclxuICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0Vm9sdW1lUmVxdWVzdHNbZV0ucHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLnNldE5hbWUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZW5kTWVzc2FnZVdoZW5Mb2FkZWQoby5zZXROYW1lKGUpKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLnNldFZvbHVtZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLnNldFZvbHVtZShlKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZE1lc3NhZ2VXaGVuTG9hZGVkKG8ucGF1c2UoKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLnJlc3VtZSgpKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLnRvZ2dsZVBsYXkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLnRvZ2dsZVBsYXkoKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5zZWVrID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZE1lc3NhZ2VXaGVuTG9hZGVkKG8uc2VlayhlKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5wcmV2aW91c1RyYWNrID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZE1lc3NhZ2VXaGVuTG9hZGVkKG8ucHJldmlvdXNUcmFjayhlKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5uZXh0VHJhY2sgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZW5kTWVzc2FnZVdoZW5Mb2FkZWQoby5uZXh0VHJhY2soZSkpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZE1lc3NhZ2VXaGVuTG9hZGVkKG8uZGlzY29ubmVjdCgpKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9nZXRMaXN0ZW5lcnMgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0ge307XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgKGVbby5BQ0NPVU5UX0VSUk9SXSA9IFwiYWNjb3VudF9lcnJvclwiKSxcclxuICAgICAgICAgICAgICAoZVtvLkFVVEhfRVJST1JdID0gXCJhdXRoZW50aWNhdGlvbl9lcnJvclwiKSxcclxuICAgICAgICAgICAgICAoZVtvLlBMQVlCQUNLX0VSUk9SXSA9IFwicGxheWJhY2tfZXJyb3JcIiksXHJcbiAgICAgICAgICAgICAgKGVbby5QTEFZRVJfSU5JVF9FUlJPUl0gPSBcImluaXRpYWxpemF0aW9uX2Vycm9yXCIpLFxyXG4gICAgICAgICAgICAgIChlW28uUExBWUVSX1JFQURZXSA9IFwicmVhZHlcIiksXHJcbiAgICAgICAgICAgICAgKGVbby5QTEFZRVJfTk9UX1JFQURZXSA9IFwibm90X3JlYWR5XCIpLFxyXG4gICAgICAgICAgICAgIChlW28uUExBWUVSX1NUQVRFX0NIQU5HRURdID0gXCJwbGF5ZXJfc3RhdGVfY2hhbmdlZFwiKSxcclxuICAgICAgICAgICAgICBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnRMaXN0ZW5lcnNbZVt0XV0gfHwgW107XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSkoKSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX29uRXZlbnQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dldExpc3RlbmVycyhlLm5hbWUpLmZvckVhY2goZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICAgIHQoZS5ldmVudERhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9vbkdldFRva2VuID0gZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgICAgICB2YXIgbiA9IHRoaXMuX29wdGlvbnMuZ2V0T0F1dGhUb2tlbjtcclxuICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2Ygbikge1xyXG4gICAgICAgICAgICAgIHZhciByID0gXCJnZXRPQXV0aFRva2VuIGlzIG5vdCBhIGZ1bmN0aW9uXCI7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMuX2dldExpc3RlbmVycyhvLlBMQVlFUl9JTklUX0VSUk9SKS5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLl9vbkV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgbmFtZTogby5QTEFZRVJfSU5JVF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgZXZlbnREYXRhOiB7IG1lc3NhZ2U6IHIgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ldyBzKG4pLnRoZW4oXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2Uoby50b2tlbihlLCB0KSk7XHJcbiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5fb25Db25uZWN0ZWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucmVmIGluIHRoaXMuX2Nvbm5lY3Rpb25SZXF1ZXN0cyAmJlxyXG4gICAgICAgICAgICAgICh0aGlzLl9jb25uZWN0aW9uUmVxdWVzdHNbZS5yZWZdLnJlc29sdmUoZS5jb25uZWN0ZWQpLFxyXG4gICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25uZWN0aW9uUmVxdWVzdHNbZS5yZWZdKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9vbkN1cnJlbnRTdGF0ZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5yZWYgaW4gdGhpcy5fZ2V0Q3VycmVudFN0YXRlUmVxdWVzdHMgJiZcclxuICAgICAgICAgICAgICAodGhpcy5fZ2V0Q3VycmVudFN0YXRlUmVxdWVzdHNbZS5yZWZdLnJlc29sdmUoZS5zdGF0ZSksXHJcbiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2dldEN1cnJlbnRTdGF0ZVJlcXVlc3RzW2UucmVmXSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5fb25Wb2x1bWUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucmVmIGluIHRoaXMuX2dldFZvbHVtZVJlcXVlc3RzICYmXHJcbiAgICAgICAgICAgICAgKHRoaXMuX2dldFZvbHVtZVJlcXVlc3RzW2UucmVmXS5yZXNvbHZlKGUudm9sdW1lKSxcclxuICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZ2V0Vm9sdW1lUmVxdWVzdHNbZS5yZWZdKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9oYW5kbGVNZXNzYWdlcyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHtcclxuICAgICAgICAgICAgZSBpbiB0aGlzLl9tZXNzYWdlSGFuZGxlcnMgJiYgdGhpcy5fbWVzc2FnZUhhbmRsZXJzW2VdKHQsIG4pO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX3NlbmRNZXNzYWdlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYy5zZW5kKG4sIGUsIGEpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkZWQudGhlbih0aGlzLl9zZW5kTWVzc2FnZS5iaW5kKHRoaXMsIGUpKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgZlxyXG4gICAgICAgICk7XHJcbiAgICAgIH07XHJcbiAgICBlLmV4cG9ydHMuc2V0dXBQbGF5ZXJFbnYgPSBhO1xyXG4gIH0sXHJcbiAgZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgciA9IG4oMCksXHJcbiAgICAgIHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAodGhpcy5fb25NZXNzYWdlQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHt9KSxcclxuICAgICAgICAgICh0aGlzLl9yZWNlaXZlTWVzc2FnZSA9IHRoaXMuX3JlY2VpdmVNZXNzYWdlLmJpbmQodGhpcykpLFxyXG4gICAgICAgICAgKHRoaXMuX21lc3NhZ2VJZCA9IDApO1xyXG4gICAgICB9O1xyXG4gICAgKHMucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgKHRoaXMuX29uTWVzc2FnZUNhbGxiYWNrID0gdCksXHJcbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLl9yZWNlaXZlTWVzc2FnZSk7XHJcbiAgICB9KSxcclxuICAgICAgKHMucHJvdG90eXBlLnN0b3BMaXN0ZW5pbmcgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLl9yZWNlaXZlTWVzc2FnZSk7XHJcbiAgICAgIH0pLFxyXG4gICAgICAocy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHtcclxuICAgICAgICByZXR1cm4gZS5wb3N0TWVzc2FnZSh0aGlzLl9hZGRNZXNzYWdlSWQodCksIG4gfHwgXCIqXCIpLCB0LnNlcTtcclxuICAgICAgfSksXHJcbiAgICAgIChzLnByb3RvdHlwZS5fYWRkTWVzc2FnZUlkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHJldHVybiAoZS5zZXEgPSB0aGlzLl9tZXNzYWdlSWQrKyksIGU7XHJcbiAgICAgIH0pLFxyXG4gICAgICAocy5wcm90b3R5cGUuX3JlY2VpdmVNZXNzYWdlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciB0ID0gZS5kYXRhO1xyXG4gICAgICAgIHQudHlwZSA9PT0gci5TUE9USUZZX01FU1NBR0UgJiZcclxuICAgICAgICAgIHQuYm9keSAmJlxyXG4gICAgICAgICAgdC5ib2R5LnRvcGljICYmXHJcbiAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2VDYWxsYmFjayh0LmJvZHkudG9waWMsIHQuYm9keS5kYXRhLCB0LnNlcSk7XHJcbiAgICAgIH0pLFxyXG4gICAgICAoZS5leHBvcnRzID0gcyk7XHJcbiAgfSxcclxuICBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIChmdW5jdGlvbih0KSB7XHJcbiAgICAgIHZhciBuID0gdC5Qcm9taXNlO1xyXG4gICAgICBpZiAoIW4pIHRocm93IG5ldyBFcnJvcihcIkZhdGFsOiBubyBQcm9taXNlIGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZS5cIik7XHJcbiAgICAgIHZhciByO1xyXG4gICAgICAociA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eVxyXG4gICAgICAgID8gZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZVt0XVxyXG4gICAgICAgICAgICAgID8gZVxyXG4gICAgICAgICAgICAgIDogKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7XHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBuLFxyXG4gICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLFxyXG4gICAgICAgICAgICAgICAgICB3cml0YWJsZTogITBcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgOiBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlW3RdID8gZSA6ICgoZVt0XSA9IG4pLCBlKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIHIobiwgXCJkZWZlclwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBlID0ge307XHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAoZS5wcm9taXNlID0gbmV3IG4oZnVuY3Rpb24odCwgbikge1xyXG4gICAgICAgICAgICAgIChlLnJlc29sdmUgPSB0KSwgKGUucmVqZWN0ID0gbik7XHJcbiAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KSxcclxuICAgICAgICByKG4ucHJvdG90eXBlLCBcInNwcmVhZFwiLCBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG4uYWxsKGUpO1xyXG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxID09PSB0Lmxlbmd0aCA/IGUodFswXSkgOiBlLmFwcGx5KHRoaXMsIHQpO1xyXG4gICAgICAgICAgfSwgdCk7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgKGUuZXhwb3J0cyA9IG4pO1xyXG4gICAgfS5jYWxsKHQsIG4oMSkpKTtcclxuICB9LFxyXG4gIGZ1bmN0aW9uKGUsIHQsIG4pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgKGZ1bmN0aW9uKHQpIHtcclxuICAgICAgZnVuY3Rpb24gcigpIHtcclxuICAgICAgICB2YXIgZSA9IG5ldyB0LlVpbnQ4QXJyYXkoMTYpO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICB0LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZSksIGkudG9IZXgoZS5qb2luKFwiXCIpLCA0MCkuc2xpY2UoMCwgNDApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBzKCkge1xyXG4gICAgICAgIGZvciAodmFyIGUgPSBuZXcgQXJyYXkoMjcpLCB0ID0gZS5sZW5ndGg7IHQtLTsgKVxyXG4gICAgICAgICAgZVt0XSA9IE1hdGguZmxvb3IoOCAqIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgIHJldHVybiBpLnRvSGV4KGUuam9pbihcIlwiKSwgNDApO1xyXG4gICAgICB9XHJcbiAgICAgIGZ1bmN0aW9uIG8oZSwgbikge1xyXG4gICAgICAgIGlmIChlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlO1xyXG4gICAgICAgIGlmIChuKSByZXR1cm4gdSgpO1xyXG4gICAgICAgIHZhciByID0gdC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjKTtcclxuICAgICAgICByZXR1cm4gciB8fCAoKHIgPSB1KCkpLCB0LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGMsIHIpKSwgcjtcclxuICAgICAgfVxyXG4gICAgICB2YXIgaSA9IG4oNyksXHJcbiAgICAgICAgYSA9XHJcbiAgICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQuVWludDhBcnJheSAmJlxyXG4gICAgICAgICAgdm9pZCAwICE9PSB0LmNyeXB0byAmJlxyXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMsXHJcbiAgICAgICAgdSA9IGEgPyByIDogcyxcclxuICAgICAgICBjID0gXCJfc3BoYXJtb255X2RldmljZV9pZFwiO1xyXG4gICAgICBlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgZ2V0OiBvLFxyXG4gICAgICAgIGdlbmVyYXRlOiB1LFxyXG4gICAgICAgIGdlbmVyYXRlV2l0aENyeXB0bzogcixcclxuICAgICAgICBnZW5lcmF0ZVdpdGhSYW5kb206IHNcclxuICAgICAgfTtcclxuICAgIH0uY2FsbCh0LCBuKDEpKSk7XHJcbiAgfSxcclxuICBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIGZ1bmN0aW9uIHIoZSwgdCwgbikge1xyXG4gICAgICBmb3IgKHZhciByID0gMCwgcyA9IDA7IHMgPCBlLmxlbmd0aDsgKytzKSB7XHJcbiAgICAgICAgdmFyIG8gPSBlW3NdICogdCArIHI7XHJcbiAgICAgICAgKGVbc10gPSBvICUgbiksIChyID0gfn4obyAvIG4pKTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKDsgcjsgKSBlLnB1c2gociAlIG4pLCAociA9IH5+KHIgLyBuKSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzKGUsIHQsIG4sIHIpIHtcclxuICAgICAgdmFyIHMsXHJcbiAgICAgICAgbyxcclxuICAgICAgICBpID0gMDtcclxuICAgICAgZm9yIChvID0gMDsgbyA8IHQubGVuZ3RoOyArK28pXHJcbiAgICAgICAgKHMgPSB+fmVbb10gKyB0W29dICogbiArIGkpLCAoZVtvXSA9IHMgJSByKSwgKGkgPSB+fihzIC8gcikpO1xyXG4gICAgICBmb3IgKDsgaTsgKSAocyA9IH5+ZVtvXSArIGkpLCAoZVtvXSA9IHMgJSByKSwgKGkgPSB+fihzIC8gcikpLCArK287XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvKGUsIHQsIG4pIHtcclxuICAgICAgZm9yICh2YXIgbyA9IFswXSwgaSA9IFsxXSwgYSA9IDA7IGEgPCBlLmxlbmd0aDsgKythKVxyXG4gICAgICAgIHMobywgaSwgZVthXSwgbiksIHIoaSwgdCwgbik7XHJcbiAgICAgIHJldHVybiBvO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaShlLCB0KSB7XHJcbiAgICAgIGZvciAodmFyIG4gPSBbXSwgciA9IDA7IHIgPCBlLmxlbmd0aDsgKytyKSBuLnB1c2godFtlW3JdXSk7XHJcbiAgICAgIHJldHVybiBuLnJldmVyc2UoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGEoZSwgdCkge1xyXG4gICAgICBmb3IgKDsgZS5sZW5ndGggPCB0OyApIGUucHVzaCgwKTtcclxuICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICB2YXIgdSA9IFwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIixcclxuICAgICAgYyA9IHt9LFxyXG4gICAgICBfID0ge307XHJcbiAgICAhKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgZSwgdDtcclxuICAgICAgZm9yIChlID0gMCwgdCA9IHUubGVuZ3RoOyBlIDwgdDsgKytlKSBfW3VbZV1dID0gZTtcclxuICAgICAgZm9yIChlID0gMDsgZSA8IDE2OyArK2UpIGNbXCIwMTIzNDU2Nzg5YWJjZGVmXCJbZV1dID0gZTtcclxuICAgICAgZm9yIChlID0gMDsgZSA8IDE2OyArK2UpIGNbXCIwMTIzNDU2Nzg5QUJDREVGXCJbZV1dID0gZTtcclxuICAgIH0pKCksXHJcbiAgICAgIChlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgZnJvbUJ5dGVzOiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICByZXR1cm4gaShhKG8oZS5zbGljZSgwKS5yZXZlcnNlKCksIDI1NiwgNjIpLCB0KSwgdSkuam9pbihcIlwiKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvQnl0ZXM6IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICAgIHJldHVybiBhKG8oaShlLCBfKSwgNjIsIDI1NiksIHQpLnJldmVyc2UoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvSGV4OiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICByZXR1cm4gaShhKG8oaShlLCBfKSwgNjIsIDE2KSwgdCksIHUpLmpvaW4oXCJcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmcm9tSGV4OiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICByZXR1cm4gaShhKG8oaShlLCBjKSwgMTYsIDYyKSwgdCksIHUpLmpvaW4oXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbl0pO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/js/spotify-player.js\n");

/***/ })

}]);