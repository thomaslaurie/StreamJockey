
<html>
	<head>
		<title>Google APIs - Sample JS Page</title>
	</head>

	<body>
		<button id="sendRequest">Send Request</button>

		<script src='jquery-3.3.1.js'></script>

		<!-- async loads script at the same time html is being parsed, defer doesnt run the script until html has been fully parsed -->
		<!-- http://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html -->

		<!-- google's extensive version -->
		<!-- when this script loads, it changes its own onload attribute to an empty function, then calls handleClientLoad()-->
		<!--<script async defer src="https://apis.google.com/js/api.js" 
						onload="this.onload=function(){};handleClientLoad()" 
						onreadystatechange="if (this.readyState === 'complete') this.onload()">
		</script> -->

		<script>
			
			
			function loadYoutubeDataApi() {
				// original code: https://developers.google.com/youtube/v3/docs/search/list
				
				// https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiloadlibraries-callbackorconfig
				// load(libraries, callback{});
				gapi.load('client:auth2', function() {
					// Initialize the gapi.client object, which app uses to make API requests.
					// https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiclientinitargs
					gapi.client.init({
							'clientId': '575534136905-vgdfpnd34q1o701grha9i9pfuhm1lvck.apps.googleusercontent.com',
							'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest'],
							// at least one scope is needed, this is the bare minimum scope
							'scope': 'https://www.googleapis.com/auth/youtube.readonly'
					}).then(function () {
						console.log('Youtube Data API loaded and initialized')
					});
				});
			}

			$('#sendRequest').click(function() {
				//handleAuthClick(event);
				sendRequest('bonobo', 5);
			}); 

			function sendRequest(query, num) {
				var args = {
					method: 'GET',
					path: '/youtube/v3/search',
					params: {
						// https://developers.google.com/youtube/v3/docs/search/list#parameters
						part: 'snippet',
						type: 'video',

						// min 0, max 50, default 5
						maxResults: num,
						// nextPageToken (and prevPageToken) are returned with each search result, fill this in to get to other pages
						//pageToken: token,

						q: query,
					}
				};

				gapi.client.request(args).then(function(fufilled, rejected) {
					if (fufilled) {
						console.log(fufilled.result);
					} else {
						console.log(rejected);
					}
				});
			}
		</script>

		<script src="https://apis.google.com/js/api.js" onload="loadYoutubeDataApi()"></script>
	</body>
</html>