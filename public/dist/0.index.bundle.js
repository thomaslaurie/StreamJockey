(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../public/src/js/spotify-player.js":
/*!******************************************!*\
  !*** ../public/src/js/spotify-player.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* Spotify JS-SDK - v1.6.0-b5fe287 */\r\n!(function(e) {\r\n  function t(r) {\r\n    if (n[r]) return n[r].exports;\r\n    var s = (n[r] = { i: r, l: !1, exports: {} });\r\n    return e[r].call(s.exports, s, s.exports, t), (s.l = !0), s.exports;\r\n  }\r\n  var n = {};\r\n  (t.m = e),\r\n    (t.c = n),\r\n    (t.d = function(e, n, r) {\r\n      t.o(e, n) ||\r\n        Object.defineProperty(e, n, {\r\n          configurable: !1,\r\n          enumerable: !0,\r\n          get: r\r\n        });\r\n    }),\r\n    (t.n = function(e) {\r\n      var n =\r\n        e && e.__esModule\r\n          ? function() {\r\n              return e.default;\r\n            }\r\n          : function() {\r\n              return e;\r\n            };\r\n      return t.d(n, \"a\", n), n;\r\n    }),\r\n    (t.o = function(e, t) {\r\n      return Object.prototype.hasOwnProperty.call(e, t);\r\n    }),\r\n    (t.p = \"\"),\r\n    t((t.s = 2));\r\n})([\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    var r = {\r\n      SPOTIFY_MESSAGE: \"SP_MESSAGE\",\r\n      ACCOUNT_ERROR: \"ACCOUNT_ERROR\",\r\n      AUTH_ERROR: \"AUTH_ERROR\",\r\n      CONNECT: \"CONNECT\",\r\n      CONNECTED: \"CONNECTED\",\r\n      CURRENT_STATE: \"CURRENT_STATE\",\r\n      DISCONNECT: \"DISCONNECT\",\r\n      EVENT: \"EVENT\",\r\n      GET_CURRENT_STATE: \"GET_CURRENT_STATE\",\r\n      GET_TOKEN: \"GET_TOKEN\",\r\n      GET_VOLUME: \"GET_VOLUME\",\r\n      INIT: \"INIT\",\r\n      LOADED: \"LOADED\",\r\n      NEXT_TRACK: \"NEXT_TRACK\",\r\n      PAUSE: \"PAUSE\",\r\n      PLAYBACK_ERROR: \"PLAYBACK_ERROR\",\r\n      PLAYER_INIT_ERROR: \"PLAYER_INIT_ERROR\",\r\n      PLAYER_READY: \"PLAYER_READY\",\r\n      PLAYER_NOT_READY: \"PLAYER_NOT_READY\",\r\n      PLAYER_STATE_CHANGED: \"PLAYER_STATE_CHANGED\",\r\n      PREV_TRACK: \"PREV_TRACK\",\r\n      RESUME: \"RESUME\",\r\n      SEEK: \"SEEK\",\r\n      SET_NAME: \"SET_NAME\",\r\n      SET_VOLUME: \"SET_VOLUME\",\r\n      TOGGLE_PLAY: \"TOGGLE_PLAY\",\r\n      TOKEN: \"TOKEN\",\r\n      VOLUME: \"VOLUME\",\r\n      accountError: function(e) {\r\n        return this._createEventMessage(r.ACCOUNT_ERROR, { message: e });\r\n      },\r\n      authError: function(e) {\r\n        return this._createEventMessage(r.AUTH_ERROR, e);\r\n      },\r\n      playbackError: function(e) {\r\n        return this._createEventMessage(r.PLAYBACK_ERROR, e);\r\n      },\r\n      playerReady: function(e) {\r\n        return this._createEventMessage(r.PLAYER_READY, e);\r\n      },\r\n      playerNotReady: function(e) {\r\n        return this._createEventMessage(r.PLAYER_NOT_READY, e);\r\n      },\r\n      connect: function() {\r\n        return this._createMessage(r.CONNECT);\r\n      },\r\n      connected: function(e, t) {\r\n        return this._createMessage(r.CONNECTED, { connected: e, ref: t });\r\n      },\r\n      disconnect: function() {\r\n        return this._createMessage(r.DISCONNECT);\r\n      },\r\n      init: function(e) {\r\n        return this._createMessage(r.INIT, e);\r\n      },\r\n      playerInitError: function(e) {\r\n        return this._createEventMessage(r.PLAYER_INIT_ERROR, e);\r\n      },\r\n      getToken: function() {\r\n        return this._createMessage(r.GET_TOKEN);\r\n      },\r\n      token: function(e, t) {\r\n        return this._createMessage(r.TOKEN, { token: e, ref: t });\r\n      },\r\n      pause: function() {\r\n        return this._createMessage(r.PAUSE);\r\n      },\r\n      resume: function() {\r\n        return this._createMessage(r.RESUME);\r\n      },\r\n      togglePlay: function() {\r\n        return this._createMessage(r.TOGGLE_PLAY);\r\n      },\r\n      seek: function(e) {\r\n        return this._createMessage(r.SEEK, e);\r\n      },\r\n      nextTrack: function(e) {\r\n        return this._createMessage(r.NEXT_TRACK, e);\r\n      },\r\n      previousTrack: function(e) {\r\n        return this._createMessage(r.PREV_TRACK, e);\r\n      },\r\n      getCurrentState: function() {\r\n        return this._createMessage(r.GET_CURRENT_STATE);\r\n      },\r\n      currentState: function(e, t) {\r\n        return this._createMessage(r.CURRENT_STATE, { state: e, ref: t });\r\n      },\r\n      playerStateChanged: function(e) {\r\n        return this._createEventMessage(r.PLAYER_STATE_CHANGED, e);\r\n      },\r\n      getVolume: function() {\r\n        return this._createMessage(r.GET_VOLUME);\r\n      },\r\n      volume: function(e, t) {\r\n        return this._createMessage(r.VOLUME, { volume: e, ref: t });\r\n      },\r\n      setVolume: function(e) {\r\n        return this._createMessage(r.SET_VOLUME, e);\r\n      },\r\n      setName: function(e) {\r\n        return this._createMessage(r.SET_NAME, e);\r\n      },\r\n      embeddedLoaded: function() {\r\n        return this._createMessage(r.LOADED);\r\n      },\r\n      _createEventMessage: function(e, t) {\r\n        return this._createMessage(r.EVENT, { name: e, eventData: t });\r\n      },\r\n      _createMessage: function(e, t) {\r\n        return {\r\n          type: r.SPOTIFY_MESSAGE,\r\n          body: { topic: e, data: t ? JSON.parse(JSON.stringify(t)) : null }\r\n        };\r\n      }\r\n    };\r\n    e.exports = r;\r\n  },\r\n  function(e, t) {\r\n    var n;\r\n    n = (function() {\r\n      return this;\r\n    })();\r\n    try {\r\n      n = n || Function(\"return this\")() || (0, eval)(\"this\");\r\n    } catch (e) {\r\n      \"object\" == typeof window && (n = window);\r\n    }\r\n    e.exports = n;\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    function r() {\r\n      var e = n(3);\r\n      if (!document.body) throw new Error(\"Document doesn't have a body\");\r\n      if (\r\n        ((window.Spotify = { Player: e.setupPlayerEnv(window) }),\r\n        window.onSpotifyWebPlaybackSDKReady)\r\n      )\r\n        window.onSpotifyWebPlaybackSDKReady();\r\n      else {\r\n        if (!window.onSpotifyPlayerAPIReady)\r\n          throw new Error(\"onSpotifyWebPlaybackSDKReady is not defined\");\r\n        window.onSpotifyPlayerAPIReady();\r\n      }\r\n    }\r\n    \"complete\" === document.readyState\r\n      ? r()\r\n      : window.addEventListener(\"load\", r);\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    var r = n(4),\r\n      s = n(5),\r\n      o = n(0),\r\n      i = n(6),\r\n      a = function(e, t) {\r\n        var n,\r\n          a = \"https://sdk.scdn.co/embedded/index.html\",\r\n          u = s.defer(),\r\n          c = new r(),\r\n          _ =\r\n            t ||\r\n            function(t) {\r\n              var n = e.document.createElement(\"iframe\");\r\n              return (\r\n                (n.src = t),\r\n                n.style.setProperty(\"display\", \"none\", \"important\"),\r\n                (n.allow = \"encrypted-media; autoplay\"),\r\n                e.document.body.appendChild(n),\r\n                n.contentWindow\r\n              );\r\n            },\r\n          h = function(t) {\r\n            t === o.LOADED && (c.stopListening(e, h), u.resolve());\r\n          };\r\n        c.listen(e, h), (n = _(a));\r\n        var f = function(t) {\r\n          (this._options = this._sanitizeOptions(t)),\r\n            (this._handleMessages = this._handleMessages.bind(this)),\r\n            (this._messageHandlers = {}),\r\n            (this._eventListeners = {}),\r\n            this._setupMessageHandlers(),\r\n            (this._connectionRequests = {}),\r\n            (this._getCurrentStateRequests = {}),\r\n            (this._getVolumeRequests = {}),\r\n            (this.isLoaded = u.promise.then(\r\n              function() {\r\n                c.listen(e, this._handleMessages),\r\n                  this._sendMessage(o.init(this._options));\r\n              }.bind(this)\r\n            ));\r\n        };\r\n        return (\r\n          (f.prototype._sanitizeOptions = function(t) {\r\n            var n = (e && e.location && e.location.hostname) || \"\";\r\n            return {\r\n              name: t.name || n,\r\n              id: i.get(),\r\n              getOAuthToken: t.getOAuthToken || t.getOauthToken,\r\n              volume: t.volume || 1\r\n            };\r\n          }),\r\n          (f.prototype._setupMessageHandlers = function() {\r\n            (this._messageHandlers[o.GET_TOKEN] = this._onGetToken.bind(this)),\r\n              (this._messageHandlers[o.EVENT] = this._onEvent.bind(this)),\r\n              (this._messageHandlers[o.CONNECTED] = this._onConnected.bind(\r\n                this\r\n              )),\r\n              (this._messageHandlers[\r\n                o.CURRENT_STATE\r\n              ] = this._onCurrentState.bind(this)),\r\n              (this._messageHandlers[o.VOLUME] = this._onVolume.bind(this));\r\n          }),\r\n          (f.prototype.connect = function() {\r\n            return this.isLoaded.then(\r\n              function() {\r\n                var e = this._sendMessage(o.connect());\r\n                return (\r\n                  (this._connectionRequests[e] = s.defer()),\r\n                  this._connectionRequests[e].promise\r\n                );\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype.on = function(e, t) {\r\n            if (!e) throw new TypeError(\"Argument `eventName` is required.\");\r\n            if (\"function\" != typeof t)\r\n              throw new TypeError(\"Argument `listener` must be a function.\");\r\n            return (\r\n              (this._eventListeners[e] = this._eventListeners[e] || []),\r\n              -1 === this._eventListeners[e].indexOf(t) &&\r\n                (this._eventListeners[e].push(t), !0)\r\n            );\r\n          }),\r\n          (f.prototype.addListener = function(e, t) {\r\n            return this.on(e, t);\r\n          }),\r\n          (f.prototype.removeListener = function(e, t) {\r\n            if (!e) throw new TypeError(\"Argument `eventName` is required.\");\r\n            if (1 === arguments.length)\r\n              return (this._eventListeners[e] = []), !0;\r\n            if (\"function\" != typeof t)\r\n              throw new TypeError(\"Argument `listener` must be a function.\");\r\n            var n = this._eventListeners[e];\r\n            return (\r\n              !(!n || !n.length) &&\r\n              ((this._eventListeners[e] = n.filter(function(e) {\r\n                return e !== t;\r\n              })),\r\n              !0)\r\n            );\r\n          }),\r\n          (f.prototype.getCurrentState = function() {\r\n            return this.isLoaded.then(\r\n              function() {\r\n                var e = this._sendMessage(o.getCurrentState());\r\n                return (\r\n                  (this._getCurrentStateRequests[e] = s.defer()),\r\n                  this._getCurrentStateRequests[e].promise\r\n                );\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype.getVolume = function() {\r\n            return this.isLoaded.then(\r\n              function() {\r\n                var e = this._sendMessage(o.getVolume());\r\n                return (\r\n                  (this._getVolumeRequests[e] = s.defer()),\r\n                  this._getVolumeRequests[e].promise\r\n                );\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype.setName = function(e) {\r\n            return this._sendMessageWhenLoaded(o.setName(e));\r\n          }),\r\n          (f.prototype.setVolume = function(e) {\r\n            return this._sendMessageWhenLoaded(o.setVolume(e));\r\n          }),\r\n          (f.prototype.pause = function() {\r\n            return this._sendMessageWhenLoaded(o.pause());\r\n          }),\r\n          (f.prototype.resume = function() {\r\n            return this._sendMessageWhenLoaded(o.resume());\r\n          }),\r\n          (f.prototype.togglePlay = function() {\r\n            return this._sendMessageWhenLoaded(o.togglePlay());\r\n          }),\r\n          (f.prototype.seek = function(e) {\r\n            return this._sendMessageWhenLoaded(o.seek(e));\r\n          }),\r\n          (f.prototype.previousTrack = function(e) {\r\n            return this._sendMessageWhenLoaded(o.previousTrack(e));\r\n          }),\r\n          (f.prototype.nextTrack = function(e) {\r\n            return this._sendMessageWhenLoaded(o.nextTrack(e));\r\n          }),\r\n          (f.prototype.disconnect = function() {\r\n            return this._sendMessageWhenLoaded(o.disconnect());\r\n          }),\r\n          (f.prototype._getListeners = (function() {\r\n            var e = {};\r\n            return (\r\n              (e[o.ACCOUNT_ERROR] = \"account_error\"),\r\n              (e[o.AUTH_ERROR] = \"authentication_error\"),\r\n              (e[o.PLAYBACK_ERROR] = \"playback_error\"),\r\n              (e[o.PLAYER_INIT_ERROR] = \"initialization_error\"),\r\n              (e[o.PLAYER_READY] = \"ready\"),\r\n              (e[o.PLAYER_NOT_READY] = \"not_ready\"),\r\n              (e[o.PLAYER_STATE_CHANGED] = \"player_state_changed\"),\r\n              function(t) {\r\n                return this._eventListeners[e[t]] || [];\r\n              }\r\n            );\r\n          })()),\r\n          (f.prototype._onEvent = function(e) {\r\n            this._getListeners(e.name).forEach(function(t) {\r\n              t(e.eventData);\r\n            });\r\n          }),\r\n          (f.prototype._onGetToken = function(e, t) {\r\n            var n = this._options.getOAuthToken;\r\n            if (\"function\" != typeof n) {\r\n              var r = \"getOAuthToken is not a function\";\r\n              if (this._getListeners(o.PLAYER_INIT_ERROR).length)\r\n                return void this._onEvent({\r\n                  name: o.PLAYER_INIT_ERROR,\r\n                  eventData: { message: r }\r\n                });\r\n              throw new Error(r);\r\n            }\r\n            new s(n).then(\r\n              function(e) {\r\n                this._sendMessage(o.token(e, t));\r\n              }.bind(this)\r\n            );\r\n          }),\r\n          (f.prototype._onConnected = function(e) {\r\n            e.ref in this._connectionRequests &&\r\n              (this._connectionRequests[e.ref].resolve(e.connected),\r\n              delete this._connectionRequests[e.ref]);\r\n          }),\r\n          (f.prototype._onCurrentState = function(e) {\r\n            e.ref in this._getCurrentStateRequests &&\r\n              (this._getCurrentStateRequests[e.ref].resolve(e.state),\r\n              delete this._getCurrentStateRequests[e.ref]);\r\n          }),\r\n          (f.prototype._onVolume = function(e) {\r\n            e.ref in this._getVolumeRequests &&\r\n              (this._getVolumeRequests[e.ref].resolve(e.volume),\r\n              delete this._getVolumeRequests[e.ref]);\r\n          }),\r\n          (f.prototype._handleMessages = function(e, t, n) {\r\n            e in this._messageHandlers && this._messageHandlers[e](t, n);\r\n          }),\r\n          (f.prototype._sendMessage = function(e) {\r\n            return c.send(n, e, a);\r\n          }),\r\n          (f.prototype._sendMessageWhenLoaded = function(e) {\r\n            return this.isLoaded.then(this._sendMessage.bind(this, e));\r\n          }),\r\n          f\r\n        );\r\n      };\r\n    e.exports.setupPlayerEnv = a;\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    var r = n(0),\r\n      s = function() {\r\n        (this._onMessageCallback = function() {}),\r\n          (this._receiveMessage = this._receiveMessage.bind(this)),\r\n          (this._messageId = 0);\r\n      };\r\n    (s.prototype.listen = function(e, t) {\r\n      (this._onMessageCallback = t),\r\n        e.addEventListener(\"message\", this._receiveMessage);\r\n    }),\r\n      (s.prototype.stopListening = function(e) {\r\n        e.removeEventListener(\"message\", this._receiveMessage);\r\n      }),\r\n      (s.prototype.send = function(e, t, n) {\r\n        return e.postMessage(this._addMessageId(t), n || \"*\"), t.seq;\r\n      }),\r\n      (s.prototype._addMessageId = function(e) {\r\n        return (e.seq = this._messageId++), e;\r\n      }),\r\n      (s.prototype._receiveMessage = function(e) {\r\n        var t = e.data;\r\n        t.type === r.SPOTIFY_MESSAGE &&\r\n          t.body &&\r\n          t.body.topic &&\r\n          this._onMessageCallback(t.body.topic, t.body.data, t.seq);\r\n      }),\r\n      (e.exports = s);\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    (function(t) {\r\n      var n = t.Promise;\r\n      if (!n) throw new Error(\"Fatal: no Promise implementation available.\");\r\n      var r;\r\n      (r = Object.defineProperty\r\n        ? function(e, t, n) {\r\n            return e[t]\r\n              ? e\r\n              : (Object.defineProperty(e, t, {\r\n                  value: n,\r\n                  configurable: !0,\r\n                  writable: !0\r\n                }),\r\n                e);\r\n          }\r\n        : function(e, t, n) {\r\n            return e[t] ? e : ((e[t] = n), e);\r\n          }),\r\n        r(n, \"defer\", function() {\r\n          var e = {};\r\n          return (\r\n            (e.promise = new n(function(t, n) {\r\n              (e.resolve = t), (e.reject = n);\r\n            })),\r\n            e\r\n          );\r\n        }),\r\n        r(n.prototype, \"spread\", function(e, t) {\r\n          return this.then(function(e) {\r\n            return n.all(e);\r\n          }).then(function(t) {\r\n            return 1 === t.length ? e(t[0]) : e.apply(this, t);\r\n          }, t);\r\n        }),\r\n        (e.exports = n);\r\n    }.call(t, n(1)));\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    (function(t) {\r\n      function r() {\r\n        var e = new t.Uint8Array(16);\r\n        return (\r\n          t.crypto.getRandomValues(e), i.toHex(e.join(\"\"), 40).slice(0, 40)\r\n        );\r\n      }\r\n      function s() {\r\n        for (var e = new Array(27), t = e.length; t--; )\r\n          e[t] = Math.floor(8 * Math.random());\r\n        return i.toHex(e.join(\"\"), 40);\r\n      }\r\n      function o(e, n) {\r\n        if (e && \"string\" == typeof e) return e;\r\n        if (n) return u();\r\n        var r = t.localStorage.getItem(c);\r\n        return r || ((r = u()), t.localStorage.setItem(c, r)), r;\r\n      }\r\n      var i = n(7),\r\n        a =\r\n          \"function\" == typeof t.Uint8Array &&\r\n          void 0 !== t.crypto &&\r\n          \"function\" == typeof t.crypto.getRandomValues,\r\n        u = a ? r : s,\r\n        c = \"_spharmony_device_id\";\r\n      e.exports = {\r\n        get: o,\r\n        generate: u,\r\n        generateWithCrypto: r,\r\n        generateWithRandom: s\r\n      };\r\n    }.call(t, n(1)));\r\n  },\r\n  function(e, t, n) {\r\n    \"use strict\";\r\n    function r(e, t, n) {\r\n      for (var r = 0, s = 0; s < e.length; ++s) {\r\n        var o = e[s] * t + r;\r\n        (e[s] = o % n), (r = ~~(o / n));\r\n      }\r\n      for (; r; ) e.push(r % n), (r = ~~(r / n));\r\n    }\r\n    function s(e, t, n, r) {\r\n      var s,\r\n        o,\r\n        i = 0;\r\n      for (o = 0; o < t.length; ++o)\r\n        (s = ~~e[o] + t[o] * n + i), (e[o] = s % r), (i = ~~(s / r));\r\n      for (; i; ) (s = ~~e[o] + i), (e[o] = s % r), (i = ~~(s / r)), ++o;\r\n    }\r\n    function o(e, t, n) {\r\n      for (var o = [0], i = [1], a = 0; a < e.length; ++a)\r\n        s(o, i, e[a], n), r(i, t, n);\r\n      return o;\r\n    }\r\n    function i(e, t) {\r\n      for (var n = [], r = 0; r < e.length; ++r) n.push(t[e[r]]);\r\n      return n.reverse();\r\n    }\r\n    function a(e, t) {\r\n      for (; e.length < t; ) e.push(0);\r\n      return e;\r\n    }\r\n    var u = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n      c = {},\r\n      _ = {};\r\n    !(function() {\r\n      var e, t;\r\n      for (e = 0, t = u.length; e < t; ++e) _[u[e]] = e;\r\n      for (e = 0; e < 16; ++e) c[\"0123456789abcdef\"[e]] = e;\r\n      for (e = 0; e < 16; ++e) c[\"0123456789ABCDEF\"[e]] = e;\r\n    })(),\r\n      (e.exports = {\r\n        fromBytes: function(e, t) {\r\n          return i(a(o(e.slice(0).reverse(), 256, 62), t), u).join(\"\");\r\n        },\r\n        toBytes: function(e, t) {\r\n          return a(o(i(e, _), 62, 256), t).reverse();\r\n        },\r\n        toHex: function(e, t) {\r\n          return i(a(o(i(e, _), 62, 16), t), u).join(\"\");\r\n        },\r\n        fromHex: function(e, t) {\r\n          return i(a(o(i(e, c), 16, 62), t), u).join(\"\");\r\n        }\r\n      });\r\n  }\r\n]);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vcHVibGljL3NyYy9qcy9zcG90aWZ5LXBsYXllci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9wdWJsaWMvc3JjL2pzL3Nwb3RpZnktcGxheWVyLmpzP2NlMzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogU3BvdGlmeSBKUy1TREsgLSB2MS42LjAtYjVmZTI4NyAqL1xyXG4hKGZ1bmN0aW9uKGUpIHtcclxuICBmdW5jdGlvbiB0KHIpIHtcclxuICAgIGlmIChuW3JdKSByZXR1cm4gbltyXS5leHBvcnRzO1xyXG4gICAgdmFyIHMgPSAobltyXSA9IHsgaTogciwgbDogITEsIGV4cG9ydHM6IHt9IH0pO1xyXG4gICAgcmV0dXJuIGVbcl0uY2FsbChzLmV4cG9ydHMsIHMsIHMuZXhwb3J0cywgdCksIChzLmwgPSAhMCksIHMuZXhwb3J0cztcclxuICB9XHJcbiAgdmFyIG4gPSB7fTtcclxuICAodC5tID0gZSksXHJcbiAgICAodC5jID0gbiksXHJcbiAgICAodC5kID0gZnVuY3Rpb24oZSwgbiwgcikge1xyXG4gICAgICB0Lm8oZSwgbikgfHxcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbiwge1xyXG4gICAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcclxuICAgICAgICAgIGVudW1lcmFibGU6ICEwLFxyXG4gICAgICAgICAgZ2V0OiByXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSxcclxuICAgICh0Lm4gPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciBuID1cclxuICAgICAgICBlICYmIGUuX19lc01vZHVsZVxyXG4gICAgICAgICAgPyBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZS5kZWZhdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICByZXR1cm4gdC5kKG4sIFwiYVwiLCBuKSwgbjtcclxuICAgIH0pLFxyXG4gICAgKHQubyA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KTtcclxuICAgIH0pLFxyXG4gICAgKHQucCA9IFwiXCIpLFxyXG4gICAgdCgodC5zID0gMikpO1xyXG59KShbXHJcbiAgZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgciA9IHtcclxuICAgICAgU1BPVElGWV9NRVNTQUdFOiBcIlNQX01FU1NBR0VcIixcclxuICAgICAgQUNDT1VOVF9FUlJPUjogXCJBQ0NPVU5UX0VSUk9SXCIsXHJcbiAgICAgIEFVVEhfRVJST1I6IFwiQVVUSF9FUlJPUlwiLFxyXG4gICAgICBDT05ORUNUOiBcIkNPTk5FQ1RcIixcclxuICAgICAgQ09OTkVDVEVEOiBcIkNPTk5FQ1RFRFwiLFxyXG4gICAgICBDVVJSRU5UX1NUQVRFOiBcIkNVUlJFTlRfU1RBVEVcIixcclxuICAgICAgRElTQ09OTkVDVDogXCJESVNDT05ORUNUXCIsXHJcbiAgICAgIEVWRU5UOiBcIkVWRU5UXCIsXHJcbiAgICAgIEdFVF9DVVJSRU5UX1NUQVRFOiBcIkdFVF9DVVJSRU5UX1NUQVRFXCIsXHJcbiAgICAgIEdFVF9UT0tFTjogXCJHRVRfVE9LRU5cIixcclxuICAgICAgR0VUX1ZPTFVNRTogXCJHRVRfVk9MVU1FXCIsXHJcbiAgICAgIElOSVQ6IFwiSU5JVFwiLFxyXG4gICAgICBMT0FERUQ6IFwiTE9BREVEXCIsXHJcbiAgICAgIE5FWFRfVFJBQ0s6IFwiTkVYVF9UUkFDS1wiLFxyXG4gICAgICBQQVVTRTogXCJQQVVTRVwiLFxyXG4gICAgICBQTEFZQkFDS19FUlJPUjogXCJQTEFZQkFDS19FUlJPUlwiLFxyXG4gICAgICBQTEFZRVJfSU5JVF9FUlJPUjogXCJQTEFZRVJfSU5JVF9FUlJPUlwiLFxyXG4gICAgICBQTEFZRVJfUkVBRFk6IFwiUExBWUVSX1JFQURZXCIsXHJcbiAgICAgIFBMQVlFUl9OT1RfUkVBRFk6IFwiUExBWUVSX05PVF9SRUFEWVwiLFxyXG4gICAgICBQTEFZRVJfU1RBVEVfQ0hBTkdFRDogXCJQTEFZRVJfU1RBVEVfQ0hBTkdFRFwiLFxyXG4gICAgICBQUkVWX1RSQUNLOiBcIlBSRVZfVFJBQ0tcIixcclxuICAgICAgUkVTVU1FOiBcIlJFU1VNRVwiLFxyXG4gICAgICBTRUVLOiBcIlNFRUtcIixcclxuICAgICAgU0VUX05BTUU6IFwiU0VUX05BTUVcIixcclxuICAgICAgU0VUX1ZPTFVNRTogXCJTRVRfVk9MVU1FXCIsXHJcbiAgICAgIFRPR0dMRV9QTEFZOiBcIlRPR0dMRV9QTEFZXCIsXHJcbiAgICAgIFRPS0VOOiBcIlRPS0VOXCIsXHJcbiAgICAgIFZPTFVNRTogXCJWT0xVTUVcIixcclxuICAgICAgYWNjb3VudEVycm9yOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUV2ZW50TWVzc2FnZShyLkFDQ09VTlRfRVJST1IsIHsgbWVzc2FnZTogZSB9KTtcclxuICAgICAgfSxcclxuICAgICAgYXV0aEVycm9yOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUV2ZW50TWVzc2FnZShyLkFVVEhfRVJST1IsIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBwbGF5YmFja0Vycm9yOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUV2ZW50TWVzc2FnZShyLlBMQVlCQUNLX0VSUk9SLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgcGxheWVyUmVhZHk6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuUExBWUVSX1JFQURZLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgcGxheWVyTm90UmVhZHk6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuUExBWUVSX05PVF9SRUFEWSwgZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbm5lY3Q6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuQ09OTkVDVCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbm5lY3RlZDogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuQ09OTkVDVEVELCB7IGNvbm5lY3RlZDogZSwgcmVmOiB0IH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBkaXNjb25uZWN0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLkRJU0NPTk5FQ1QpO1xyXG4gICAgICB9LFxyXG4gICAgICBpbml0OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5JTklULCBlKTtcclxuICAgICAgfSxcclxuICAgICAgcGxheWVySW5pdEVycm9yOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUV2ZW50TWVzc2FnZShyLlBMQVlFUl9JTklUX0VSUk9SLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0VG9rZW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuR0VUX1RPS0VOKTtcclxuICAgICAgfSxcclxuICAgICAgdG9rZW46IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLlRPS0VOLCB7IHRva2VuOiBlLCByZWY6IHQgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHBhdXNlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLlBBVVNFKTtcclxuICAgICAgfSxcclxuICAgICAgcmVzdW1lOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLlJFU1VNRSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRvZ2dsZVBsYXk6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuVE9HR0xFX1BMQVkpO1xyXG4gICAgICB9LFxyXG4gICAgICBzZWVrOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5TRUVLLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgbmV4dFRyYWNrOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5ORVhUX1RSQUNLLCBlKTtcclxuICAgICAgfSxcclxuICAgICAgcHJldmlvdXNUcmFjazogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuUFJFVl9UUkFDSywgZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEN1cnJlbnRTdGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5HRVRfQ1VSUkVOVF9TVEFURSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGN1cnJlbnRTdGF0ZTogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuQ1VSUkVOVF9TVEFURSwgeyBzdGF0ZTogZSwgcmVmOiB0IH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBwbGF5ZXJTdGF0ZUNoYW5nZWQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRXZlbnRNZXNzYWdlKHIuUExBWUVSX1NUQVRFX0NIQU5HRUQsIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRWb2x1bWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuR0VUX1ZPTFVNRSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHZvbHVtZTogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVNZXNzYWdlKHIuVk9MVU1FLCB7IHZvbHVtZTogZSwgcmVmOiB0IH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXRWb2x1bWU6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLlNFVF9WT0xVTUUsIGUpO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXROYW1lOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1lc3NhZ2Uoci5TRVRfTkFNRSwgZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGVtYmVkZGVkTG9hZGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLkxPQURFRCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIF9jcmVhdGVFdmVudE1lc3NhZ2U6IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlTWVzc2FnZShyLkVWRU5ULCB7IG5hbWU6IGUsIGV2ZW50RGF0YTogdCB9KTtcclxuICAgICAgfSxcclxuICAgICAgX2NyZWF0ZU1lc3NhZ2U6IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdHlwZTogci5TUE9USUZZX01FU1NBR0UsXHJcbiAgICAgICAgICBib2R5OiB7IHRvcGljOiBlLCBkYXRhOiB0ID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSkgOiBudWxsIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5leHBvcnRzID0gcjtcclxuICB9LFxyXG4gIGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgIHZhciBuO1xyXG4gICAgbiA9IChmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KSgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgbiA9IG4gfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgwLCBldmFsKShcInRoaXNcIik7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIFwib2JqZWN0XCIgPT0gdHlwZW9mIHdpbmRvdyAmJiAobiA9IHdpbmRvdyk7XHJcbiAgICB9XHJcbiAgICBlLmV4cG9ydHMgPSBuO1xyXG4gIH0sXHJcbiAgZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBmdW5jdGlvbiByKCkge1xyXG4gICAgICB2YXIgZSA9IG4oMyk7XHJcbiAgICAgIGlmICghZG9jdW1lbnQuYm9keSkgdGhyb3cgbmV3IEVycm9yKFwiRG9jdW1lbnQgZG9lc24ndCBoYXZlIGEgYm9keVwiKTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICgod2luZG93LlNwb3RpZnkgPSB7IFBsYXllcjogZS5zZXR1cFBsYXllckVudih3aW5kb3cpIH0pLFxyXG4gICAgICAgIHdpbmRvdy5vblNwb3RpZnlXZWJQbGF5YmFja1NES1JlYWR5KVxyXG4gICAgICApXHJcbiAgICAgICAgd2luZG93Lm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkoKTtcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cub25TcG90aWZ5UGxheWVyQVBJUmVhZHkpXHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvblNwb3RpZnlXZWJQbGF5YmFja1NES1JlYWR5IGlzIG5vdCBkZWZpbmVkXCIpO1xyXG4gICAgICAgIHdpbmRvdy5vblNwb3RpZnlQbGF5ZXJBUElSZWFkeSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcImNvbXBsZXRlXCIgPT09IGRvY3VtZW50LnJlYWR5U3RhdGVcclxuICAgICAgPyByKClcclxuICAgICAgOiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgcik7XHJcbiAgfSxcclxuICBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciByID0gbig0KSxcclxuICAgICAgcyA9IG4oNSksXHJcbiAgICAgIG8gPSBuKDApLFxyXG4gICAgICBpID0gbig2KSxcclxuICAgICAgYSA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICB2YXIgbixcclxuICAgICAgICAgIGEgPSBcImh0dHBzOi8vc2RrLnNjZG4uY28vZW1iZWRkZWQvaW5kZXguaHRtbFwiLFxyXG4gICAgICAgICAgdSA9IHMuZGVmZXIoKSxcclxuICAgICAgICAgIGMgPSBuZXcgcigpLFxyXG4gICAgICAgICAgXyA9XHJcbiAgICAgICAgICAgIHQgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICAgIHZhciBuID0gZS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAobi5zcmMgPSB0KSxcclxuICAgICAgICAgICAgICAgIG4uc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiLCBcImltcG9ydGFudFwiKSxcclxuICAgICAgICAgICAgICAgIChuLmFsbG93ID0gXCJlbmNyeXB0ZWQtbWVkaWE7IGF1dG9wbGF5XCIpLFxyXG4gICAgICAgICAgICAgICAgZS5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLFxyXG4gICAgICAgICAgICAgICAgbi5jb250ZW50V2luZG93XHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIGggPSBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAgIHQgPT09IG8uTE9BREVEICYmIChjLnN0b3BMaXN0ZW5pbmcoZSwgaCksIHUucmVzb2x2ZSgpKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgYy5saXN0ZW4oZSwgaCksIChuID0gXyhhKSk7XHJcbiAgICAgICAgdmFyIGYgPSBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgICAodGhpcy5fb3B0aW9ucyA9IHRoaXMuX3Nhbml0aXplT3B0aW9ucyh0KSksXHJcbiAgICAgICAgICAgICh0aGlzLl9oYW5kbGVNZXNzYWdlcyA9IHRoaXMuX2hhbmRsZU1lc3NhZ2VzLmJpbmQodGhpcykpLFxyXG4gICAgICAgICAgICAodGhpcy5fbWVzc2FnZUhhbmRsZXJzID0ge30pLFxyXG4gICAgICAgICAgICAodGhpcy5fZXZlbnRMaXN0ZW5lcnMgPSB7fSksXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHVwTWVzc2FnZUhhbmRsZXJzKCksXHJcbiAgICAgICAgICAgICh0aGlzLl9jb25uZWN0aW9uUmVxdWVzdHMgPSB7fSksXHJcbiAgICAgICAgICAgICh0aGlzLl9nZXRDdXJyZW50U3RhdGVSZXF1ZXN0cyA9IHt9KSxcclxuICAgICAgICAgICAgKHRoaXMuX2dldFZvbHVtZVJlcXVlc3RzID0ge30pLFxyXG4gICAgICAgICAgICAodGhpcy5pc0xvYWRlZCA9IHUucHJvbWlzZS50aGVuKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYy5saXN0ZW4oZSwgdGhpcy5faGFuZGxlTWVzc2FnZXMpLFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kTWVzc2FnZShvLmluaXQodGhpcy5fb3B0aW9ucykpO1xyXG4gICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX3Nhbml0aXplT3B0aW9ucyA9IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAoZSAmJiBlLmxvY2F0aW9uICYmIGUubG9jYXRpb24uaG9zdG5hbWUpIHx8IFwiXCI7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgbmFtZTogdC5uYW1lIHx8IG4sXHJcbiAgICAgICAgICAgICAgaWQ6IGkuZ2V0KCksXHJcbiAgICAgICAgICAgICAgZ2V0T0F1dGhUb2tlbjogdC5nZXRPQXV0aFRva2VuIHx8IHQuZ2V0T2F1dGhUb2tlbixcclxuICAgICAgICAgICAgICB2b2x1bWU6IHQudm9sdW1lIHx8IDFcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9zZXR1cE1lc3NhZ2VIYW5kbGVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAodGhpcy5fbWVzc2FnZUhhbmRsZXJzW28uR0VUX1RPS0VOXSA9IHRoaXMuX29uR2V0VG9rZW4uYmluZCh0aGlzKSksXHJcbiAgICAgICAgICAgICAgKHRoaXMuX21lc3NhZ2VIYW5kbGVyc1tvLkVWRU5UXSA9IHRoaXMuX29uRXZlbnQuYmluZCh0aGlzKSksXHJcbiAgICAgICAgICAgICAgKHRoaXMuX21lc3NhZ2VIYW5kbGVyc1tvLkNPTk5FQ1RFRF0gPSB0aGlzLl9vbkNvbm5lY3RlZC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICkpLFxyXG4gICAgICAgICAgICAgICh0aGlzLl9tZXNzYWdlSGFuZGxlcnNbXHJcbiAgICAgICAgICAgICAgICBvLkNVUlJFTlRfU1RBVEVcclxuICAgICAgICAgICAgICBdID0gdGhpcy5fb25DdXJyZW50U3RhdGUuYmluZCh0aGlzKSksXHJcbiAgICAgICAgICAgICAgKHRoaXMuX21lc3NhZ2VIYW5kbGVyc1tvLlZPTFVNRV0gPSB0aGlzLl9vblZvbHVtZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkZWQudGhlbihcclxuICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5fc2VuZE1lc3NhZ2Uoby5jb25uZWN0KCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgKHRoaXMuX2Nvbm5lY3Rpb25SZXF1ZXN0c1tlXSA9IHMuZGVmZXIoKSksXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25SZXF1ZXN0c1tlXS5wcm9taXNlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUub24gPSBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICAgIGlmICghZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IGBldmVudE5hbWVgIGlzIHJlcXVpcmVkLlwiKTtcclxuICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdClcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgYGxpc3RlbmVyYCBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICh0aGlzLl9ldmVudExpc3RlbmVyc1tlXSA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VdIHx8IFtdKSxcclxuICAgICAgICAgICAgICAtMSA9PT0gdGhpcy5fZXZlbnRMaXN0ZW5lcnNbZV0uaW5kZXhPZih0KSAmJlxyXG4gICAgICAgICAgICAgICAgKHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VdLnB1c2godCksICEwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKGUsIHQpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICAgIGlmICghZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IGBldmVudE5hbWVgIGlzIHJlcXVpcmVkLlwiKTtcclxuICAgICAgICAgICAgaWYgKDEgPT09IGFyZ3VtZW50cy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9ldmVudExpc3RlbmVyc1tlXSA9IFtdKSwgITA7XHJcbiAgICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQpXHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IGBsaXN0ZW5lcmAgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTtcclxuICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9ldmVudExpc3RlbmVyc1tlXTtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAhKCFuIHx8ICFuLmxlbmd0aCkgJiZcclxuICAgICAgICAgICAgICAoKHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VdID0gbi5maWx0ZXIoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUgIT09IHQ7XHJcbiAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgICEwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuZ2V0Q3VycmVudFN0YXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTG9hZGVkLnRoZW4oXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuX3NlbmRNZXNzYWdlKG8uZ2V0Q3VycmVudFN0YXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgKHRoaXMuX2dldEN1cnJlbnRTdGF0ZVJlcXVlc3RzW2VdID0gcy5kZWZlcigpKSxcclxuICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q3VycmVudFN0YXRlUmVxdWVzdHNbZV0ucHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLmdldFZvbHVtZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0xvYWRlZC50aGVuKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLl9zZW5kTWVzc2FnZShvLmdldFZvbHVtZSgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICh0aGlzLl9nZXRWb2x1bWVSZXF1ZXN0c1tlXSA9IHMuZGVmZXIoKSksXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2dldFZvbHVtZVJlcXVlc3RzW2VdLnByb21pc2VcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5zZXROYW1lID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZE1lc3NhZ2VXaGVuTG9hZGVkKG8uc2V0TmFtZShlKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5zZXRWb2x1bWUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZW5kTWVzc2FnZVdoZW5Mb2FkZWQoby5zZXRWb2x1bWUoZSkpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLnBhdXNlKCkpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZW5kTWVzc2FnZVdoZW5Mb2FkZWQoby5yZXN1bWUoKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS50b2dnbGVQbGF5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZW5kTWVzc2FnZVdoZW5Mb2FkZWQoby50b2dnbGVQbGF5KCkpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuc2VlayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLnNlZWsoZSkpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUucHJldmlvdXNUcmFjayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLnByZXZpb3VzVHJhY2soZSkpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUubmV4dFRyYWNrID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZE1lc3NhZ2VXaGVuTG9hZGVkKG8ubmV4dFRyYWNrKGUpKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlV2hlbkxvYWRlZChvLmRpc2Nvbm5lY3QoKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5fZ2V0TGlzdGVuZXJzID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIChlW28uQUNDT1VOVF9FUlJPUl0gPSBcImFjY291bnRfZXJyb3JcIiksXHJcbiAgICAgICAgICAgICAgKGVbby5BVVRIX0VSUk9SXSA9IFwiYXV0aGVudGljYXRpb25fZXJyb3JcIiksXHJcbiAgICAgICAgICAgICAgKGVbby5QTEFZQkFDS19FUlJPUl0gPSBcInBsYXliYWNrX2Vycm9yXCIpLFxyXG4gICAgICAgICAgICAgIChlW28uUExBWUVSX0lOSVRfRVJST1JdID0gXCJpbml0aWFsaXphdGlvbl9lcnJvclwiKSxcclxuICAgICAgICAgICAgICAoZVtvLlBMQVlFUl9SRUFEWV0gPSBcInJlYWR5XCIpLFxyXG4gICAgICAgICAgICAgIChlW28uUExBWUVSX05PVF9SRUFEWV0gPSBcIm5vdF9yZWFkeVwiKSxcclxuICAgICAgICAgICAgICAoZVtvLlBMQVlFUl9TVEFURV9DSEFOR0VEXSA9IFwicGxheWVyX3N0YXRlX2NoYW5nZWRcIiksXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50TGlzdGVuZXJzW2VbdF1dIHx8IFtdO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pKCkpLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9vbkV2ZW50ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRMaXN0ZW5lcnMoZS5uYW1lKS5mb3JFYWNoKGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICAgICAgICB0KGUuZXZlbnREYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5fb25HZXRUb2tlbiA9IGZ1bmN0aW9uKGUsIHQpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9vcHRpb25zLmdldE9BdXRoVG9rZW47XHJcbiAgICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIG4pIHtcclxuICAgICAgICAgICAgICB2YXIgciA9IFwiZ2V0T0F1dGhUb2tlbiBpcyBub3QgYSBmdW5jdGlvblwiO1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzLl9nZXRMaXN0ZW5lcnMoby5QTEFZRVJfSU5JVF9FUlJPUikubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5fb25FdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgIG5hbWU6IG8uUExBWUVSX0lOSVRfRVJST1IsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50RGF0YTogeyBtZXNzYWdlOiByIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXcgcyhuKS50aGVuKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG8udG9rZW4oZSwgdCkpO1xyXG4gICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX29uQ29ubmVjdGVkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnJlZiBpbiB0aGlzLl9jb25uZWN0aW9uUmVxdWVzdHMgJiZcclxuICAgICAgICAgICAgICAodGhpcy5fY29ubmVjdGlvblJlcXVlc3RzW2UucmVmXS5yZXNvbHZlKGUuY29ubmVjdGVkKSxcclxuICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29ubmVjdGlvblJlcXVlc3RzW2UucmVmXSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5fb25DdXJyZW50U3RhdGUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucmVmIGluIHRoaXMuX2dldEN1cnJlbnRTdGF0ZVJlcXVlc3RzICYmXHJcbiAgICAgICAgICAgICAgKHRoaXMuX2dldEN1cnJlbnRTdGF0ZVJlcXVlc3RzW2UucmVmXS5yZXNvbHZlKGUuc3RhdGUpLFxyXG4gICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9nZXRDdXJyZW50U3RhdGVSZXF1ZXN0c1tlLnJlZl0pO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICAoZi5wcm90b3R5cGUuX29uVm9sdW1lID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnJlZiBpbiB0aGlzLl9nZXRWb2x1bWVSZXF1ZXN0cyAmJlxyXG4gICAgICAgICAgICAgICh0aGlzLl9nZXRWb2x1bWVSZXF1ZXN0c1tlLnJlZl0ucmVzb2x2ZShlLnZvbHVtZSksXHJcbiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2dldFZvbHVtZVJlcXVlc3RzW2UucmVmXSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIChmLnByb3RvdHlwZS5faGFuZGxlTWVzc2FnZXMgPSBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICAgICAgICAgIGUgaW4gdGhpcy5fbWVzc2FnZUhhbmRsZXJzICYmIHRoaXMuX21lc3NhZ2VIYW5kbGVyc1tlXSh0LCBuKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGMuc2VuZChuLCBlLCBhKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKGYucHJvdG90eXBlLl9zZW5kTWVzc2FnZVdoZW5Mb2FkZWQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTG9hZGVkLnRoZW4odGhpcy5fc2VuZE1lc3NhZ2UuYmluZCh0aGlzLCBlKSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGZcclxuICAgICAgICApO1xyXG4gICAgICB9O1xyXG4gICAgZS5leHBvcnRzLnNldHVwUGxheWVyRW52ID0gYTtcclxuICB9LFxyXG4gIGZ1bmN0aW9uKGUsIHQsIG4pIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHIgPSBuKDApLFxyXG4gICAgICBzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgKHRoaXMuX29uTWVzc2FnZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7fSksXHJcbiAgICAgICAgICAodGhpcy5fcmVjZWl2ZU1lc3NhZ2UgPSB0aGlzLl9yZWNlaXZlTWVzc2FnZS5iaW5kKHRoaXMpKSxcclxuICAgICAgICAgICh0aGlzLl9tZXNzYWdlSWQgPSAwKTtcclxuICAgICAgfTtcclxuICAgIChzLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICh0aGlzLl9vbk1lc3NhZ2VDYWxsYmFjayA9IHQpLFxyXG4gICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5fcmVjZWl2ZU1lc3NhZ2UpO1xyXG4gICAgfSksXHJcbiAgICAgIChzLnByb3RvdHlwZS5zdG9wTGlzdGVuaW5nID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5fcmVjZWl2ZU1lc3NhZ2UpO1xyXG4gICAgICB9KSxcclxuICAgICAgKHMucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICAgICAgcmV0dXJuIGUucG9zdE1lc3NhZ2UodGhpcy5fYWRkTWVzc2FnZUlkKHQpLCBuIHx8IFwiKlwiKSwgdC5zZXE7XHJcbiAgICAgIH0pLFxyXG4gICAgICAocy5wcm90b3R5cGUuX2FkZE1lc3NhZ2VJZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gKGUuc2VxID0gdGhpcy5fbWVzc2FnZUlkKyspLCBlO1xyXG4gICAgICB9KSxcclxuICAgICAgKHMucHJvdG90eXBlLl9yZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICB2YXIgdCA9IGUuZGF0YTtcclxuICAgICAgICB0LnR5cGUgPT09IHIuU1BPVElGWV9NRVNTQUdFICYmXHJcbiAgICAgICAgICB0LmJvZHkgJiZcclxuICAgICAgICAgIHQuYm9keS50b3BpYyAmJlxyXG4gICAgICAgICAgdGhpcy5fb25NZXNzYWdlQ2FsbGJhY2sodC5ib2R5LnRvcGljLCB0LmJvZHkuZGF0YSwgdC5zZXEpO1xyXG4gICAgICB9KSxcclxuICAgICAgKGUuZXhwb3J0cyA9IHMpO1xyXG4gIH0sXHJcbiAgZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAoZnVuY3Rpb24odCkge1xyXG4gICAgICB2YXIgbiA9IHQuUHJvbWlzZTtcclxuICAgICAgaWYgKCFuKSB0aHJvdyBuZXcgRXJyb3IoXCJGYXRhbDogbm8gUHJvbWlzZSBpbXBsZW1lbnRhdGlvbiBhdmFpbGFibGUuXCIpO1xyXG4gICAgICB2YXIgcjtcclxuICAgICAgKHIgPSBPYmplY3QuZGVmaW5lUHJvcGVydHlcclxuICAgICAgICA/IGZ1bmN0aW9uKGUsIHQsIG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVbdF1cclxuICAgICAgICAgICAgICA/IGVcclxuICAgICAgICAgICAgICA6IChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwge1xyXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogbixcclxuICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCxcclxuICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDogZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZVt0XSA/IGUgOiAoKGVbdF0gPSBuKSwgZSk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICByKG4sIFwiZGVmZXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgZSA9IHt9O1xyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgKGUucHJvbWlzZSA9IG5ldyBuKGZ1bmN0aW9uKHQsIG4pIHtcclxuICAgICAgICAgICAgICAoZS5yZXNvbHZlID0gdCksIChlLnJlamVjdCA9IG4pO1xyXG4gICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgIGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgcihuLnByb3RvdHlwZSwgXCJzcHJlYWRcIiwgZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuLmFsbChlKTtcclxuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMSA9PT0gdC5sZW5ndGggPyBlKHRbMF0pIDogZS5hcHBseSh0aGlzLCB0KTtcclxuICAgICAgICAgIH0sIHQpO1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIChlLmV4cG9ydHMgPSBuKTtcclxuICAgIH0uY2FsbCh0LCBuKDEpKSk7XHJcbiAgfSxcclxuICBmdW5jdGlvbihlLCB0LCBuKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIChmdW5jdGlvbih0KSB7XHJcbiAgICAgIGZ1bmN0aW9uIHIoKSB7XHJcbiAgICAgICAgdmFyIGUgPSBuZXcgdC5VaW50OEFycmF5KDE2KTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgdC5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGUpLCBpLnRvSGV4KGUuam9pbihcIlwiKSwgNDApLnNsaWNlKDAsIDQwKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgZnVuY3Rpb24gcygpIHtcclxuICAgICAgICBmb3IgKHZhciBlID0gbmV3IEFycmF5KDI3KSwgdCA9IGUubGVuZ3RoOyB0LS07IClcclxuICAgICAgICAgIGVbdF0gPSBNYXRoLmZsb29yKDggKiBNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgICByZXR1cm4gaS50b0hleChlLmpvaW4oXCJcIiksIDQwKTtcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBvKGUsIG4pIHtcclxuICAgICAgICBpZiAoZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gZTtcclxuICAgICAgICBpZiAobikgcmV0dXJuIHUoKTtcclxuICAgICAgICB2YXIgciA9IHQubG9jYWxTdG9yYWdlLmdldEl0ZW0oYyk7XHJcbiAgICAgICAgcmV0dXJuIHIgfHwgKChyID0gdSgpKSwgdC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjLCByKSksIHI7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGkgPSBuKDcpLFxyXG4gICAgICAgIGEgPVxyXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LlVpbnQ4QXJyYXkgJiZcclxuICAgICAgICAgIHZvaWQgMCAhPT0gdC5jcnlwdG8gJiZcclxuICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLFxyXG4gICAgICAgIHUgPSBhID8gciA6IHMsXHJcbiAgICAgICAgYyA9IFwiX3NwaGFybW9ueV9kZXZpY2VfaWRcIjtcclxuICAgICAgZS5leHBvcnRzID0ge1xyXG4gICAgICAgIGdldDogbyxcclxuICAgICAgICBnZW5lcmF0ZTogdSxcclxuICAgICAgICBnZW5lcmF0ZVdpdGhDcnlwdG86IHIsXHJcbiAgICAgICAgZ2VuZXJhdGVXaXRoUmFuZG9tOiBzXHJcbiAgICAgIH07XHJcbiAgICB9LmNhbGwodCwgbigxKSkpO1xyXG4gIH0sXHJcbiAgZnVuY3Rpb24oZSwgdCwgbikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBmdW5jdGlvbiByKGUsIHQsIG4pIHtcclxuICAgICAgZm9yICh2YXIgciA9IDAsIHMgPSAwOyBzIDwgZS5sZW5ndGg7ICsrcykge1xyXG4gICAgICAgIHZhciBvID0gZVtzXSAqIHQgKyByO1xyXG4gICAgICAgIChlW3NdID0gbyAlIG4pLCAociA9IH5+KG8gLyBuKSk7XHJcbiAgICAgIH1cclxuICAgICAgZm9yICg7IHI7ICkgZS5wdXNoKHIgJSBuKSwgKHIgPSB+fihyIC8gbikpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcyhlLCB0LCBuLCByKSB7XHJcbiAgICAgIHZhciBzLFxyXG4gICAgICAgIG8sXHJcbiAgICAgICAgaSA9IDA7XHJcbiAgICAgIGZvciAobyA9IDA7IG8gPCB0Lmxlbmd0aDsgKytvKVxyXG4gICAgICAgIChzID0gfn5lW29dICsgdFtvXSAqIG4gKyBpKSwgKGVbb10gPSBzICUgciksIChpID0gfn4ocyAvIHIpKTtcclxuICAgICAgZm9yICg7IGk7ICkgKHMgPSB+fmVbb10gKyBpKSwgKGVbb10gPSBzICUgciksIChpID0gfn4ocyAvIHIpKSwgKytvO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbyhlLCB0LCBuKSB7XHJcbiAgICAgIGZvciAodmFyIG8gPSBbMF0sIGkgPSBbMV0sIGEgPSAwOyBhIDwgZS5sZW5ndGg7ICsrYSlcclxuICAgICAgICBzKG8sIGksIGVbYV0sIG4pLCByKGksIHQsIG4pO1xyXG4gICAgICByZXR1cm4gbztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGkoZSwgdCkge1xyXG4gICAgICBmb3IgKHZhciBuID0gW10sIHIgPSAwOyByIDwgZS5sZW5ndGg7ICsrcikgbi5wdXNoKHRbZVtyXV0pO1xyXG4gICAgICByZXR1cm4gbi5yZXZlcnNlKCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBhKGUsIHQpIHtcclxuICAgICAgZm9yICg7IGUubGVuZ3RoIDwgdDsgKSBlLnB1c2goMCk7XHJcbiAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG4gICAgdmFyIHUgPSBcIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIsXHJcbiAgICAgIGMgPSB7fSxcclxuICAgICAgXyA9IHt9O1xyXG4gICAgIShmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGUsIHQ7XHJcbiAgICAgIGZvciAoZSA9IDAsIHQgPSB1Lmxlbmd0aDsgZSA8IHQ7ICsrZSkgX1t1W2VdXSA9IGU7XHJcbiAgICAgIGZvciAoZSA9IDA7IGUgPCAxNjsgKytlKSBjW1wiMDEyMzQ1Njc4OWFiY2RlZlwiW2VdXSA9IGU7XHJcbiAgICAgIGZvciAoZSA9IDA7IGUgPCAxNjsgKytlKSBjW1wiMDEyMzQ1Njc4OUFCQ0RFRlwiW2VdXSA9IGU7XHJcbiAgICB9KSgpLFxyXG4gICAgICAoZS5leHBvcnRzID0ge1xyXG4gICAgICAgIGZyb21CeXRlczogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgICAgcmV0dXJuIGkoYShvKGUuc2xpY2UoMCkucmV2ZXJzZSgpLCAyNTYsIDYyKSwgdCksIHUpLmpvaW4oXCJcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b0J5dGVzOiBmdW5jdGlvbihlLCB0KSB7XHJcbiAgICAgICAgICByZXR1cm4gYShvKGkoZSwgXyksIDYyLCAyNTYpLCB0KS5yZXZlcnNlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b0hleDogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgICAgcmV0dXJuIGkoYShvKGkoZSwgXyksIDYyLCAxNiksIHQpLCB1KS5qb2luKFwiXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnJvbUhleDogZnVuY3Rpb24oZSwgdCkge1xyXG4gICAgICAgICAgcmV0dXJuIGkoYShvKGkoZSwgYyksIDE2LCA2MiksIHQpLCB1KS5qb2luKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5dKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../public/src/js/spotify-player.js\n");

/***/ })

}]);